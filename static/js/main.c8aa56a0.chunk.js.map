{"version":3,"sources":["googleApi/utilities.js","googleApi/gapi.js","googleApi/authentication.js","utilities/transactions.js","utilities/utilities.js","utilities/budgetsData.js","utilities/budgetCycle.js","utilities/errorHandling.js","api/transactions.js","api/budgetsData.js","api/accountsData.js","api/accountData.js","hooks/useConsoleLog.js","hooks/useScript.js","hooks/useBudgetCycleTransactions.js","components/Logo/index.js","components/GoogleApiSignInButton/index.js","components/SignInView/index.js","components/DashboardBudgetCycleDropdown/index.js","components/DashboardTop/index.js","components/DashboardInsight/index.js","components/DashboardInsights/index.js","components/DashboardShowcase/index.js","components/DashboardContent/index.js","components/DashboardView/index.js","components/BudgetGraphStatusIcon/index.js","components/BudgetGraph/index.js","components/BudgetsView/index.js","components/TransactionsImportForm/index.js","components/InputDropdown/index.js","components/TransactionsDataSearchForm/index.js","components/TransactionRowDateSeparator/index.js","components/TransactionRow/index.js","components/TransactionsData/index.js","components/TagBadge/index.js","components/TransactionDetailModalInput/index.js","components/TransactionDetailModal/index.js","components/TransactionDeleteModal/index.js","components/TransactionsImportDuplicatesModalDuplicateCheckbox/index.js","components/TransactionsImportDuplicatesModal/index.js","components/TransactionsImportConfirmedModal/index.js","components/TransactionsImportFormToggle/index.js","components/TransactionsView/index.js","components/SettingsInput/index.js","components/SettingsForm/index.js","components/SettingsView/index.js","components/FooterNavbar/index.js","components/SignInSettingsModal/index.js","components/GoogleApiUserButton/index.js","components/Header/index.js","components/App/index.js","utilities/accountsData.js","utilities/accountData.js","reportWebVitals.js","index.js"],"names":["getHeadersFromJSON","JSON","Array","reduce","headers","transaction","Object","keys","filter","key","includes","getSpreadsheetData","parse","localStorage","getItem","getSpreadsheetId","spreadsheetData","spreadsheetId","setSpreadsheetId","setItem","stringify","setSpreadsheetData","getCredentials","getClientId","creds","clientId","setClientId","credentials","newCreds","convertSheetsArraysToJSON","data","splice","map","line","obj","value","i","convertJSONToSheetsArray","object","header","isArray","join","getDynamicPropertyByArray","startingObject","dotSeparatedProperties","split","property","convertColumnNumberToColumnLetter","columnNumber","columnLettersArray","letter","Math","floor","push","reverse","convertColumnLetterToColumnNumber","columnLetters","number","columnLetter","indexOf","convertArrayToA1Notation","rowsColumnsArray","startingCell","startingColumnLetter","match","startingRow","Number","startingColumnIndex","rows","columns","rowNumber","parseGoogleSheetsNumber","potentialNumber","isNaN","parseGoogleSheetsDate","potentialDate","Date","getTime","callGoogleApiFunction","googleApi","resourceType","method","optionsParam","pageToken","leftoverIds","params","options","part","undefined","id","length","maxResults","Promise","resolve","reject","a","resource","window","gapi","client","response","console","log","result","nextPageToken","items","mine","values","error","getSheetsSpreadsheetValues","sheetName","range","r","updateSheetsSpreadsheetValues","valuesJSON","valueInputOption","includeValuesInResponse","responseValueRenderOption","scopes","discoveryDocs","initAuthorization","loginCallback","logoutCallback","info","CredentialsNotFoundError","Error","name","err","fetchAuthCredentials","loadGoogleApis","throwException","load","initializeGoogleApis","init","scope","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","get","catch","signInInfo","getProfileInformation","signIn","signOut","profile","currentUser","getBasicProfile","getId","getName","firstName","getGivenName","lastName","getFamilyName","imageUrl","getImageUrl","emailAddress","getEmail","importTransactions","transactionsData","dataType","transactionDataLine","warn","transactions","newTransactionDataParts","isMatch","convertDateStringToDate","replace","newTransactionDataPart","isNewTransaction","newTransactionData","Description","TransactionDate","Amount","currentDate","PostedDate","AccountNumber","Type","DescriptionDisplay","Category","Notes","Tags","BudgetCycle","IsAutoCategorized","IsUpdatedByUser","DateCreated","DateModified","getBudgetCycleFromDate","concat","csvData","convertCSVToJSON","flat","_Date","trim","Charges","Payments","Debit","Credit","type","nullCoalesce","transactionDate","isFalsy","getTransactionDefaultDescriptionDisplay","formatTransactionDisplay","getBudgetCycleString","toLocaleDateString","toString","convertNumberToCurrency","isTransactionDuplicate","potentialDuplicate","find","areObjectsEqual","toJSON","isTransactionAutoCategorizedOrUpdatedByUser","getTransactionsAmountTotal","total","arguments","accumulator","toFixed","p0","csv","delimiter","lineObj","forEach","b","typeofA","aValues","entries","bValues","aKey","aValue","bKey","bValue","dateString","dateStringFormat","yearFormatRegEx","RegExp","monthFormatRegEx","dayFormatRegEx","getDatePartByFormat","datePartFormatRegex","getDatePartCallback","matchAll","matchStartingIndex","index","matchedFormat","matchEndingIndex","substring","yearString","yearFormat","getFullYear","monthString","monthFormat","isDescendantOf","element","potentialParent","parentElement","matchValueAgainstValue","matchedValue","escapedMatchedValue","getBudgetAmountSpentFromTransactions","budgetName","array","prop","isCreditCardPaymentTransaction","isIncomeTransaction","check","sum","item","date","getMonth","budgetCycle","getMonthFromNumber","getBudgetCycleDescription","todayBudgetCycle","fullYearDifference","monthDifference","yearDifference","throwEx","alertWindow","exception","errorMsg","message","description","fileName","lineNumber","stack","exceptionMsg","alert","getTransactions","updateTransactions","getBudgetsData","getAccountsData","getAccountData","useConsoleLog","args","useEffect","slice","useScript","src","useState","isLoaded","setIsLoaded","script","document","createElement","async","option","addEventListener","event","body","appendChild","removeChild","useBudgetCycleTransactions","getBudgetCycleTransactions","currentBudgetCycleTransactions","transaction2","lastBudgetCycleIncomeTransactions","getLastBudgetCycleIncomeTransactions","currentBudgetCycleIncomeTransactions","getCurrentBudgetCycleIncomeTransactions","currentBudgetCycleExpenseTransactions","getCurrentBudgetCycleExpenseTransactions","budgetCycleTransactionsReturn","income","expenses","this","budgetCycleTransactions","setBudgetCycleTransactions","Logo","light","className","to","GoogleApiSigninButton","isReadyForSignIn","onClick","disabled","SignInView","DashboardBudgetCycleDropdown","allBudgetCycles","onChangeProp","onChange","data-bs-toggle","aria-expanded","budgetCycleJSON","target","getAttribute","data-budget-cycle","DashboardTop","accountData","accountsData","onBudgetCycleChange","currentBudgetCycleRemaining","t","getLastUpdatedDate","max","sort","LastUpdated","record","CreditScore","DashboardInsight","insight","iconClass","title","text","DashboardInsights","budgetsData","insights","setInsights","all","personalSpendingBudgetData","budgetData","Name","personalSpendingBudgetLeft","previousInsights","bill","amountSpent","abs","amount","runInsights","DashboardShowcase","DashboardContent","DashboardView","signedInUser","setFooterNavbar","route","useLocation","pathname","BudgetGraphStatusIcon","iconText","iconColor","budget","overBudget","overEarned","BudgetGraph","isExpenseBudget","style","color","backgroundColor","width","left","right","BudgetsView","TransactionsImportForm","isOpen","onSubmitProp","onSubmit","onFileInputChangeProp","onFileInputChange","scrapedTransactionsData","setScrapedTransactionsData","onTransactionsImportFormFileInputChange","preventDefault","transactionsDataFiles","files","transactionsDataArray","file","fileContent","scrapedTransactionsDataValue","scrapedText","accept","multiple","InputDropdown","props","initialValue","initialItems","placeholder","tabIndex","inputDropdownInputRef","inputDropdownInputListeners","propName","propValue","matches","acc","filterListItems","searchFilter","setValue","startingValue","setStartingValue","setSearchFilter","filteredListItems","setFilteredListItems","selectedListItem","setSelectedListItem","isInputDropdownOpen","setIsInputDropdownOpen","wasInputDropdownOpen","setWasInputDropdownOpen","inputDropdownListRef","useRef","inputDropdownRef","addInputDropdownListItemSelection","getInputDropdownListItemFilteredText","openInputDropdown","previouslyOpen","closeInputDropdown","onInputDropdownListItemClick","newValue","innerText","isSelectedListItem","onInputDropdownListItemMouseMove","newSelectedListItem","newFilteredListItems","selectedListItemNode","current","querySelectorAll","selectedListItemNodeRect","getBoundingClientRect","inputDropdownListViewport","topIsBelowNotAboveViewportTop","top","bottomIsAboveNotBelowViewportBottom","bottom","scroll","scrollTop","checkInputDropdownListSelectionScroll","checkIfClickedOrFocusedOutsideOfDropdown","removeEventListener","inputDropdownInput","closest","onKeyDown","keyCode","newSelectedListItemIndex","upOrDown","wrapAround","ref","onBlur","setTimeout","autoComplete","onInputDropdownInputChange","onFocus","onInputDropdownInputFocus","onMouseLeave","onMouseMove","dangerouslySetInnerHTML","__html","TransactionsDataSearchForm","transactionProperties","searchFilters","onFilterClickProp","onFilterClick","search","setSearch","activeSearchSuggestion","setActiveSearchSuggestion","transactionsDataSearchFormInput","searchValue","escapedSearch","Set","getUniqueTransactionsPropertiesValues","p","getSearchSuggestions","newSearch","focus","onInputDropdownInputKeyDown","searchKey","TransactionRowDateSeparator","count","monthIndex","getDate","convertDateToDateHeaderString","TransactionRow","onTransactionEditButtonClickProp","onTransactionEditButtonClick","onTransactionDeleteButtonClickProp","onTransactionDeleteButtonClick","startingX","setStartingX","startingTouch","setstartingTouch","translateX","setTranslateX","stickyX","setStickyX","isBeingDragged","setIsBeingDragged","isFirstDrag","setIsFirstDrag","isScrollingNotDragging","setIsScrollingNotDragging","maxNecessaryDragX","isDragFeatureActive","transactionDisplay","setTransactionDisplay","formattedTransactionDisplay","onTouchMove","touch","touches","dragDistanceX","clientX","dragDistanceY","clientY","potentialNewTranslateX","setStickyXWrapper","transactionRow","onOutsideTouchStart","passive","transform","onTouchStart","onTouchEnd","TransactionsDataRows","currentDateRendered","filteredBudgetCycleTransactions","heading","dateHeaderObject","Count","TransactionsData","filterTransactionsBySearchFilters","filterBudgetCycleTransactions","every","newlyFilteredBudgetCycleTransactions","defineProperty","getOwnPropertyDescriptor","setSearchFilters","setFilteredBudgetCycleTransactions","filteredRemainingTotal","searchObject","previousSearchFilters","removedSearchFilter","newSearchFilters","TagBadge","tag","TransactionDetailModalInput","transactionDetail","onKeyPress","onTagBadgeClick","tagType","onInputDropdownInputKeyPress","TransactionDetailModal","categories","types","buttonsOptions","onClose","setBudgetCycle","setPostedDate","setTransactionDate","setAccountNumber","setAmount","setDescription","setDescriptionDisplay","setCategory","setType","setNotes","setTags","transactionDetails","setState","onTransactionDetailInputKeyPress","transactionDetailInput","classList","contains","Modal","show","onHide","Header","Title","transactionModalForm","formattedTransaction","budgetCycleString","year","month","getNumberFromMonth","getBudgetCycleFromBudgetCycleString","updatedTransaction","Body","onTransactionDetailInputChange","Footer","class","TransactionsImportDuplicatesModalDuplicateCheckbox","duplicateData","checked","confirmed","updatedDuplicateData","htmlFor","duplicate","TransactionsImportDuplicatesModal","newTransactions","duplicates","getDuplicatesDataFromDuplicates","duplicatesData","setDuplicatesData","onTransactionsImportDuplicatesModalDuplicateCheckboxChange","oldDuplicateData","newDuplicateData","previousDuplicatesData","newDuplicatesData","data-bs-dismiss","confirmedDuplicates","filteredNewTransactions","newTransaction","TransactionsImportConfirmedModal","longestTransactionDate","longestAmount","longestDescription","transactionDateString","amountString","descriptionString","transactionDateSpaces","fill","amountSpaces","descriptionSpaces","TransactionsImportFormToggle","TransactionsView","transactionsImportDuplicatesModalNewTransactions","transactionsImportDuplicatesModalDuplicates","isTransactionsImportDuplicatesModalOpen","onTransactionsImportDuplicatesModalClose","onTransactionsImportDuplicatesModalSubmit","onTransactionsImportFormSubmitProp","onTransactionsImportFormSubmit","onTransactionsImportFormFileInputChangeProp","onTransactionDetailModalSubmitProp","onTransactionDetailModalSubmit","onTransactionDeleteModalSubmitProp","onTransactionDeleteModalSubmit","transactionsImportConfirmedModalTransactions","isTransactionsImportConfirmedModalOpen","closeTransactionsImportConfirmedModal","onTransactionsImportConfirmedModalSubmit","transactionCategories","transactionTypes","isTransactionImportFormOpen","setIsTransactionImportFormOpen","transactionDetailModalTransaction","setTransactionDetailModalTransaction","isTransactionDetailModalOpen","setIsTransactionDetailModalOpen","transactionDeleteModalTransaction","setTransactionDeleteModalTransaction","isTransactionDeleteModalOpen","setIsTransactionDeleteModalOpen","closeTransactionDetailModal","closeTransactionDeleteModal","wasOpen","deletedTransaction","SettingsInput","setting","setName","SettingsForm","settings","submittedSettings","SettingsView","FooterNavbar","active","footerNavbar","activePath","process","navItems","activeItem","navItem","remove","add","setActiveItem","SignInSettingsModal","role","GoogleApiUserButton","alt","aria-labelledby","App","setTransactions","setBudgetsData","setAccountsData","setAccountData","setTransactionsImportDuplicatesModalNewTransactions","setTransactionsImportDuplicatesModalDuplicates","setIsTransactionsImportDuplicatesModalOpen","setTransactionsImportConfirmedModalTransactions","setIsTransactionsImportConfirmedModalOpen","setSignedInUser","isSignInSettingsModalOpen","setIsSignInSettingsModalOpen","update","getAllBudgetCycles","getBudgetCyclesFromTransactions","setAllBudgetCycles","gapiLoaded","saveSettings","savedSettings","settingName","settingValue","connectToGoogleAPI","onSignInChange","openSignInSettingsModal","setTransactionsHandler","previousTransactions","callback","oldTransaction","transactionsArray","typeCheckedTransactions","typeCheckTransactions","phrase","categorizedTransactionData","toLowerCase","word","toUpperCase","categorizeTransactionByDescription","setTransactionsWrapper","importTransactionsWrapper","openTransactionsImportDuplicatesModal","openTransactionsImportConfirmedModal","checkTransactionsForDuplicates","setBudgetsDataWrapper","newBudgetsData","previousBudgetsData","typeCheckBudgetsData","setAccountsDataWrapper","newAccountsData","previousAccountsData","Balance","typeCheckAccountsData","setAccountDataWrapper","newAccountData","previousAccountData","typeCheckAccountData","closeTransactionsImportDuplicatesModal","basename","path","exact","updateTransactionWrapper","deleteTransactionWrapper","confirmedTransactions","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c8aa56a0.chunk.js","sourcesContent":["//Private Functions\r\nconst getHeadersFromJSON = JSON=>{\r\n  if (!JSON instanceof Array) JSON = [JSON];\r\n  return JSON.reduce((headers, transaction)=>\r\n    [\r\n      ...headers,\r\n      ...Object.keys(transaction).filter(key=>!headers.includes(key))\r\n    ]\r\n  , []);\r\n};\r\n\r\n//Public functions\r\nexport const getSpreadsheetData = ()=>{\r\n  return JSON.parse(localStorage.getItem(\"spreadsheet-data\"));\r\n};\r\n\r\nexport const setSpreadsheetData = spreadsheetData=>{\r\n  return localStorage.setItem(\"spreadsheet-data\", JSON.stringify(spreadsheetData));\r\n};\r\n\r\nexport const getSpreadsheetId = ()=>{\r\n  const spreadsheetData = getSpreadsheetData();\r\n  return (spreadsheetData ? spreadsheetData.spreadsheetId : null);\r\n};\r\n\r\nexport const setSpreadsheetId = spreadsheetId=>{\r\n  const spreadsheetData = getSpreadsheetData() || {};\r\n  const newSpreadsheetData = {\r\n    ...spreadsheetData,\r\n    spreadsheetId,\r\n  };\r\n  return setSpreadsheetData(newSpreadsheetData);\r\n};\r\n\r\nexport const getCredentials = ()=>{\r\n  return JSON.parse(localStorage.getItem(\"creds\"));\r\n};\r\n\r\nexport const setCredentials = credentials=>{\r\n  return localStorage.setItem(\"creds\", JSON.stringify(credentials));\r\n};\r\n\r\nexport const getClientId = ()=>{\r\n  const creds = getCredentials();\r\n  return (creds ? creds.clientId : null);\r\n};\r\n\r\nexport const setClientId = clientId=>{\r\n  const creds = getCredentials() || {};\r\n  const newCreds = {\r\n    ...creds,\r\n    clientId,\r\n  };\r\n  return setCredentials(newCreds);\r\n};\r\n\r\nexport const convertSheetsArraysToJSON = (data, delimiter=\",\")=>{\r\n  if (!data) return null;\r\n\r\n  //Get the object keys\r\n  const keys = data.splice(0,1)[0];\r\n\r\n  //Return the data\r\n  return data.map(line=>\r\n    line.reduce((obj, value, i)=>\r\n      ({\r\n        ...obj,\r\n        [keys[i]]: (\r\n          value === \"\" ?\r\n          null :\r\n          (value === \"TRUE\" ? true : (value === \"FALSE\" ? false : value))\r\n        ),\r\n      })\r\n  , {})\r\n  );\r\n};\r\n\r\nexport const convertJSONToSheetsArray = (JSON, delimiter=\",\")=>{\r\n  if (!JSON) return null;\r\n\r\n  const headers = getHeadersFromJSON(JSON);\r\n\r\n  return [\r\n    headers,\r\n    ...JSON.map(object=>\r\n      headers.map(header=>(\r\n        object[header] === null ?\r\n        \"\" :\r\n        (Array.isArray(object[header]) ? object[header].join(\",\") : object[header]))\r\n      )\r\n    )\r\n  ];\r\n};\r\n\r\nexport const getDynamicPropertyByArray = (startingObject, dotSeparatedProperties)=>{\r\n  if (!(typeof dotSeparatedProperties === \"string\")) return null;\r\n  if(!dotSeparatedProperties) return startingObject;\r\n  if (!dotSeparatedProperties.includes(\".\")) return startingObject[dotSeparatedProperties];\r\n\r\n  let object = startingObject;\r\n  for(let property of dotSeparatedProperties.split(\".\")) {\r\n    if (!property) continue;\r\n    object = object[property];\r\n  }\r\n  return object;\r\n};\r\n\r\nexport const convertColumnNumberToColumnLetter = columnNumber=>{\r\n  const NUM_OF_LETTERS = 26;\r\n  const columnLettersArray = [];\r\n\r\n  //Decrement the column number by 1 (1-based, not 0-based)\r\n  columnNumber--;\r\n\r\n  for(;columnNumber >= 0;columnNumber=(columnNumber/NUM_OF_LETTERS)-1) {\r\n    const index = Math.floor(columnNumber % NUM_OF_LETTERS);\r\n    const letter = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"[index];\r\n    columnLettersArray.push(letter);\r\n  }\r\n\r\n  //Return back the \"reversed\" column letters\r\n  return columnLettersArray.reverse().join(\"\");\r\n};\r\n\r\nexport const convertColumnLetterToColumnNumber = columnLetters=>{\r\n  const NUM_OF_LETTERS = 26;\r\n\r\n  const columnNumber = [...columnLetters].reduce((number,columnLetter,i)=>{\r\n    const index = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\".indexOf(columnLetter);\r\n\r\n    //Increment the column number by 1 (1-based, not 0-based)\r\n    return number += (index+1) * (NUM_OF_LETTERS**i);\r\n  }, 0);\r\n\r\n  //Return back the \"reversed\" column letters\r\n  return columnNumber;\r\n};\r\n\r\nexport const convertArrayToA1Notation = (rowsColumnsArray, startingCell=\"A1\")=>{\r\n  const startingColumnLetter = startingCell.match(/(^[A-Z]+)/)[1];\r\n  const startingRow = Number(startingCell.match(/(\\d)/)[1]);\r\n  const startingColumnIndex = convertColumnLetterToColumnNumber(startingColumnLetter);\r\n\r\n  const [rows, columns] = rowsColumnsArray;\r\n  const columnLetter = convertColumnNumberToColumnLetter(startingColumnIndex+columns-1);\r\n  const rowNumber = startingRow+rows-1;\r\n  return `${startingCell}:${columnLetter}${rowNumber}`;\r\n};\r\n\r\nexport const parseGoogleSheetsNumber = value=>{\r\n  let potentialNumber;\r\n  return (value && (potentialNumber = Number(value)) && !isNaN(potentialNumber) ? potentialNumber : null);\r\n};\r\n\r\nexport const parseGoogleSheetsDate = value=>{\r\n  let potentialDate;\r\n  return (value && (potentialDate = (new Date(value))) && !isNaN(potentialDate.getTime()) ? potentialDate : null);\r\n};\r\n","import {getSpreadsheetId, convertSheetsArraysToJSON, convertJSONToSheetsArray, getDynamicPropertyByArray, convertArrayToA1Notation} from './utilities.js'\r\n\r\nexport const callGoogleApiFunction = (googleApi, resourceType, method, optionsParam, pageToken)=>{\r\n  //Declare variables\r\n  let leftoverIds = null;\r\n  const listIdChunkLength = 50;\r\n  let params = [];\r\n  let options = optionsParam;\r\n\r\n  //Build the request options\r\n  if (googleApi === \"youtube\") {\r\n    options = {\r\n      ...optionsParam,\r\n      part: [\r\n        \"snippet\",\r\n        \"contentDetails\",\r\n        \"status\",\r\n      ],\r\n    };\r\n  }\r\n\r\n  //Check that, if provided SOMETHING as an id,\r\n  // it wasn't falsy\r\n  if (\r\n    options.id !== undefined &&  (\r\n      options.id === null ||\r\n      options.id.length === 0\r\n    )\r\n  ) return null;\r\n\r\n  //If this was a \"list\" call, add extra options\r\n  if (method === \"list\") {\r\n    //Set the maximum amount of results per call\r\n    options.maxResults = 50;\r\n\r\n    //Only set the pageToken option if we're provided one\r\n    if (pageToken) options.pageToken = pageToken;\r\n\r\n    //Check that no more than 50 ids are searched per call;\r\n    // Otherwise, query the first 50, and save the rest for\r\n    // a follow-up call\r\n    if (options.id && options.id instanceof Array && options.id.length > 50) {\r\n      leftoverIds = options.id.splice(listIdChunkLength, options.id.length);\r\n    }\r\n  }\r\n\r\n  //If more parameters were found in options, move them over\r\n  if (options.params) {\r\n    params = (options.params instanceof Array ? options.params : [options.params]);\r\n    delete options.params;\r\n  }\r\n\r\n  //Return a Promise to the Google API\r\n  return new Promise(async (resolve,reject)=>{\r\n    try {\r\n      //Get the resource object\r\n      const resource = getDynamicPropertyByArray(window.gapi.client[googleApi], resourceType);\r\n\r\n      //Make the resource method call\r\n      const response = await resource[method](options, ...params);\r\n      console.log(response);\r\n\r\n      //If a \"list\" query was performed\r\n      if (method === \"list\") {\r\n        //If there are more results, recurse using the nextPageToken\r\n        if (response.result.nextPageToken) return resolve([...response.result.items, ...await callGoogleApiFunction(googleApi, resourceType, method, options, response.result.nextPageToken)]);\r\n\r\n        //If more than 50 ids were provided,\r\n        // move to the next set of ids\r\n        if (leftoverIds) return resolve([...response.result.items, ...await callGoogleApiFunction(googleApi, resourceType, method, {...options, id: leftoverIds})]);\r\n\r\n        //If a single id was provided instead of an arary,\r\n        // respond with the single resource using the first item of\r\n        // response.result.items, instead of the array of items\r\n        if ((options.id && !(options.id instanceof Array)) || (resourceType === \"channels\" && options.mine === true)) return resolve(response.result.items[0]);\r\n\r\n        //Otherrwise, return the entire array of items\r\n        return resolve([...response.result.items]);\r\n      }\r\n\r\n      if (resourceType === \"spreadsheets.values\" && method === \"get\") {\r\n        //Return the values\r\n        return resolve(convertSheetsArraysToJSON(response.result.values));\r\n      }\r\n\r\n      //If an \"update\" or \"insert\" query was performed\r\n      if (method === \"update\" || method === \"insert\") return resolve(response.result);\r\n\r\n      //If a \"delete\" or some other query was performed\r\n      return resolve(response);\r\n    }\r\n    catch (errResponse) {\r\n      return reject(errResponse.result.error);\r\n    }\r\n  });\r\n};\r\n\r\n//Declare our specific functions\r\nexport const getSheetsSpreadsheet = async ()=>{\r\n  return callGoogleApiFunction(\"sheets\", \"spreadsheets\", \"get\", {spreadsheetId: getSpreadsheetId()});\r\n};\r\n\r\nexport const getSheetsSpreadsheetValues = async (sheetName, range)=>{\r\n  if (!range) range = convertArrayToA1Notation([1000,26]); //A1:AA1000\r\n  if (typeof range === \"string\") range = [range]; //convert to an array of ranges if only one specified\r\n  range = range.map(r=>`'${sheetName}'!${range}`); //Add the sheet name to the range\r\n\r\n  return callGoogleApiFunction(\"sheets\", \"spreadsheets.values\", \"get\", {spreadsheetId: getSpreadsheetId(), range});\r\n};\r\n\r\nexport const updateSheetsSpreadsheetValues = async (sheetName, valuesJSON, range)=>{\r\n  if (!range) range = convertArrayToA1Notation([1000,26]); //A1:Z1000\r\n  if (typeof range === \"string\") range = [range]; //convert to an array of ranges if only one specified\r\n  range = range.map(r=>`'${sheetName}'!${range}`); //Add the sheet name to the range\r\n\r\n  return callGoogleApiFunction(\"sheets\", \"spreadsheets.values\", \"update\", {\r\n      spreadsheetId: getSpreadsheetId(),\r\n      range,\r\n      valueInputOption: \"USER_ENTERED\",\r\n      includeValuesInResponse: true,\r\n      responseValueRenderOption: \"FORMATTED_VALUE\",\r\n      resource: {\r\n        values: convertJSONToSheetsArray(valuesJSON),\r\n      }\r\n    });\r\n};\r\n","import {throwException} from './../utilities';\r\n\r\nconst scopes = [\r\n  //\"https://www.googleapis.com/auth/drive\",  //See, edit, create, and delete all or your drive files\r\n  //\"https://www.googleapis.com/auth/drive.file\",  //See, edit, create, and delete only the specific Google Drive files you use with this app\r\n  \"https://www.googleapis.com/auth/spreadsheets\",  //See, edit, create, all your Google sheets spreadsheets\r\n];\r\nconst discoveryDocs = [\"https://sheets.googleapis.com/$discovery/rest?version=v4\"];\r\n\r\n//create helper function to retrieve authorization credentials stored outside of version control\r\nconst fetchAuthCredentials = ()=>{\r\n  console.info(\"Fetching authorization credentials...\");\r\n\r\n  try {\r\n    //Get & return the credentials from localStorage\r\n    const creds = JSON.parse(localStorage.getItem(\"creds\"));\r\n    if (creds && creds.clientId) return creds;\r\n\r\n    //If proper credentials weren't found, throw\r\n    const CredentialsNotFoundError = new Error(\"Failed to get authorization credentials.\")\r\n    CredentialsNotFoundError.name = \"CredentialsNotFoundError\";\r\n    throw CredentialsNotFoundError;\r\n  }\r\n  catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\n//Load the Google Client, OAuth2.0 libraries\r\nexport const initAuthorization = (loginCallback, logoutCallback)=>{\r\n  try {\r\n    //Attempt to get the credentials\r\n    const creds = fetchAuthCredentials();\r\n\r\n    //Load the Google APIs\r\n    loadGoogleApis(creds, loginCallback, logoutCallback)\r\n\r\n    return creds;\r\n  }\r\n  catch (err) {\r\n    return throwException(err);\r\n  }\r\n};\r\n\r\nconst loadGoogleApis = (creds, loginCallback, logoutCallback)=>{\r\n  try {\r\n    console.info(\"Loading Google Client, OAuth2.0 APIs...\");\r\n    window.gapi.load(\"client:auth2\", ()=>{initializeGoogleApis(creds, loginCallback, logoutCallback)});\r\n  }\r\n  catch (err) {\r\n    return throwException(err);\r\n  }\r\n};\r\n\r\n//Initialize Google Client library (which simultaneously initializes Google OAuth2.0 library) and set up sign in listeners\r\nconst initializeGoogleApis = async (creds, loginCallback, logoutCallback)=>{\r\n  console.info(\"Loaded Google Client, OAuth2.0 APIs.\");\r\n  console.info(\"Initializing Google Client API...\");\r\n  const {clientId} = creds;\r\n\r\n  //Attempt to initialize the Google API\r\n  window.gapi.client.init({\r\n    clientId: clientId,\r\n    scope: scopes.join(\" \"), //space delimited\r\n    discoveryDocs: discoveryDocs,\r\n  })\r\n  .then(()=>{\r\n    console.info(\"Initialized Google Client API.\");\r\n\r\n    //Listen for sign in state changes\r\n    window.gapi.auth2.getAuthInstance().isSignedIn.listen(\r\n      isSignedIn => updateSigninStatus(isSignedIn, loginCallback, logoutCallback)\r\n    );\r\n\r\n    //Handle initial sign in state\r\n    updateSigninStatus(window.gapi.auth2.getAuthInstance().isSignedIn.get(), loginCallback, logoutCallback);\r\n  })\r\n  .catch(err=>{\r\n    return throwException(err);\r\n  });\r\n};\r\n\r\n//Update UI sign in state changes\r\nconst updateSigninStatus = (isSignedIn, loginCallback, logoutCallback)=>{\r\n  console.info(\"Updating sign in status...\");\r\n  if (isSignedIn) {\r\n    // authorizeButton.style.display = \"none\";\r\n    // signoutButton.style.display = \"block\";\r\n    // signoutButton.removeAttribute(\"disabled\");\r\n\r\n    //Get profile information\r\n    const signInInfo = getProfileInformation();\r\n\r\n    //Run the callback functions\r\n    if (loginCallback) loginCallback(signInInfo);\r\n  }\r\n  else {\r\n    // authorizeButton.style.display = \"block\";\r\n    // signoutButton.style.display = \"none\";\r\n\r\n    //Run the callback functions\r\n    if (logoutCallback) logoutCallback(null);\r\n  }\r\n  console.info(\"Updated sign in status.\");\r\n};\r\n\r\nexport const signIn = async ()=>{\r\n  try {\r\n    await window.gapi.auth2.getAuthInstance().signIn();\r\n  }\r\n  catch (err) {\r\n    return throwException(err, false, false);\r\n  }\r\n};\r\n\r\nexport const signOut = async ()=>{\r\n  try {\r\n    await window.gapi.auth2.getAuthInstance().signOut();\r\n  }\r\n  catch (err) {\r\n    return throwException(err, false, false);\r\n  }\r\n};\r\n\r\nconst getProfileInformation = ()=>{\r\n  console.info(\"Getting profile info...\");\r\n  const profile = window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();\r\n  if (!profile) return null;\r\n  return {\r\n    id: profile.getId(),\r\n    name: profile.getName(),\r\n    firstName: profile.getGivenName(),\r\n    lastName: profile.getFamilyName(),\r\n    imageUrl: profile.getImageUrl(),\r\n    emailAddress: profile.getEmail(),\r\n  };\r\n};\r\n","import {isFalsy, nullCoalesce, convertNumberToCurrency, convertCSVToJSON, convertDateStringToDate, areObjectsEqual, getBudgetCycleFromDate, getBudgetCycleString} from './../utilities';\r\nimport {parseGoogleSheetsNumber, parseGoogleSheetsDate} from './../googleApi';\r\n\r\n//Declare private functions\r\nconst toPascalCase = phrase=>{\r\n  return phrase.split(\" \").map(word=>word[0].toUpperCase() + word.substring(1).toLowerCase()).join(\" \");\r\n};\r\n\r\n//Declare public functions\r\nexport const typeCheckTransactions = function (transactions) {\r\n  return transactions.map(transaction=>(\r\n    {\r\n      ...transaction,\r\n      PostedDate: parseGoogleSheetsDate(transaction.PostedDate),\r\n      TransactionDate: parseGoogleSheetsDate(transaction.TransactionDate),\r\n      Amount: parseGoogleSheetsNumber(isNaN(transaction.Amount) ? transaction.Amount.replace(/(\\$|,)/g, \"\") : transaction.Amount),\r\n      Tags: !isFalsy(transaction.Tags) ? transaction.Tags : [],\r\n      BudgetCycle: parseGoogleSheetsDate(transaction.BudgetCycle),\r\n      DateCreated: parseGoogleSheetsDate(transaction.DateCreated),\r\n      DateModified: parseGoogleSheetsDate(transaction.DateModified),\r\n    }\r\n  ));\r\n};\r\n\r\nexport const importTransactions = function(transactionsData, dataType) {\r\n  try {\r\n    //if this is scraped from online app\r\n    if (dataType === \"scraped\") {\r\n      return transactionsData\r\n        /* Break out the text data into an Array of data lines */\r\n        .split(/(?:\\r\\n|\\r|\\n)/)\r\n        /* Filter out invalid transaction data lines */\r\n        .filter(transactionDataLine=>{\r\n          if (\r\n            !transactionDataLine ||\r\n            transactionDataLine.match(/(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \\d{2}, \\d{4}/) ||\r\n            transactionDataLine.match(/Posted Balance : \\$[\\d,\\.]+/)\r\n          ) {\r\n            console.warn(`Unable to read transaction line.\\r\\n${transactionDataLine}`);\r\n            return false;\r\n          }\r\n          return true;\r\n        })\r\n        /* Reduce the transaction data lines into composite transactions objects */\r\n        .reduce((transactions, transactionDataLine, i)=>{\r\n          //Make an array of the different pieces of\r\n          // transaction data this line could represent\r\n          const newTransactionDataParts = [\r\n            {\r\n              name: \"Description\",\r\n              isMatch: transactionDataLine.match(/(.+)/),\r\n              value: (transactionDataLine.match(/(.+)/) ? transactionDataLine.match(/(.+)/)[1] : null),\r\n            },\r\n            {\r\n              name: \"TransactionDate\",\r\n              isMatch: transactionDataLine.match(/(\\d{2}\\/\\d{2}\\/\\d{4})/),\r\n              value: (transactionDataLine.match(/(\\d{2}\\/\\d{2}\\/\\d{4})/) ? convertDateStringToDate(transactionDataLine.match(/(\\d{2}\\/\\d{2}\\/\\d{4})/)[1], \"MM/dd/yyyy\") : null),\r\n            },\r\n            {\r\n              name: \"Amount\",\r\n              isMatch: transactionDataLine.match(/(-?)\\$([\\d,]+\\.\\d{2})/),\r\n              value: (transactionDataLine.match(/(-?)\\$([\\d,]+\\.\\d{2})/) ? Number(`${transactionDataLine.match(/(-?)\\$([\\d,]+\\.\\d{2})/)[1]}${transactionDataLine.match(/(-?)\\$([\\d,]+\\.\\d{2})/)[2].replace(\",\",\"\")}`) : null),\r\n            },\r\n          ];\r\n\r\n          //Determine which piece of transaction data this line represents,\r\n          // based on the transaction data line number\r\n          const newTransactionDataPart = newTransactionDataParts[i%newTransactionDataParts.length];\r\n\r\n          //Determine whether this is a new transaction's data,\r\n          // based on the transaction data line number\r\n          const isNewTransaction = i%newTransactionDataParts.length===0;\r\n\r\n          //If the line doesn't match the expected transaction data regex,\r\n          // skip this transaction line with a warning\r\n          if(!newTransactionDataPart.isMatch) {\r\n            console.warn(`Unable to read transaction line.\\r\\n${transactionDataLine}`);\r\n            return transactions;\r\n          }\r\n\r\n          //Initialize the transaction data variables as all null,\r\n          // with the exception of the current data line\r\n          const newTransactionData = {\r\n            Description: null,\r\n            TransactionDate: null,\r\n            Amount: null,\r\n            [newTransactionDataPart.name]: newTransactionDataPart.value,\r\n          };\r\n\r\n          //Get the current date\r\n          const currentDate = new Date();\r\n\r\n          //Either build a new transaction object if this is a new transaction's data,\r\n          // or use a previously built one if still on the previous transaction's data\r\n          const transaction = (\r\n            !isNewTransaction ?\r\n            transactions[transactions.length-1] :\r\n            {\r\n              PostedDate: null,\r\n              TransactionDate: newTransactionData.TransactionDate,\r\n              AccountNumber: null,\r\n              Type: null,\r\n              Description: newTransactionData.Description,\r\n              DescriptionDisplay: null,\r\n              Amount: newTransactionData.Amount,\r\n              Category: null,\r\n              Notes: null,\r\n              Tags: [],\r\n              BudgetCycle: null,\r\n              IsAutoCategorized: false,\r\n              IsUpdatedByUser: false,\r\n              DateCreated: currentDate,\r\n              DateModified: currentDate,\r\n            }\r\n          );\r\n\r\n          //As the BudgetCycle depends on the TransactionDate,\r\n          // add it when the TransactionDate is found\r\n          if (newTransactionDataPart.name === \"TransactionDate\") transaction.BudgetCycle = getBudgetCycleFromDate(newTransactionData.TransactionDate);\r\n\r\n          //If this is a new transaction, add it to the transactions\r\n          if (isNewTransaction) return transactions.concat(transaction);\r\n\r\n          //Otherwise, modify the previous transaction\r\n          // with the new data and return the transactions\r\n          transaction[newTransactionDataPart.name] = newTransactionDataPart.value;\r\n          return transactions;\r\n        }, [])\r\n        /* Import transactions in ascending TransactionDate order */\r\n        .reverse();\r\n    }\r\n\r\n    //Otherwise, this is CSV or JSON data\r\n\r\n    //If CSV data, convert it to JSON first\r\n    if (dataType === \"csv\") transactionsData = transactionsData.map(csvData=>convertCSVToJSON(csvData)).flat();\r\n\r\n    //For each CSV file, convert the contents to JSON\r\n    return transactionsData.map(transaction=>{\r\n      const _Date = (transaction.Date ? transaction.Date.trim() : null);\r\n      const PostedDate = (transaction.PostedDate ? transaction.PostedDate.trim() : null);\r\n      const TransactionDate = (transaction.TransactionDate ? transaction.TransactionDate.trim() : null);\r\n      const AccountNumber = (transaction[\"Card No.\"] ? transaction[\"Card No.\"].trim() : null);\r\n      const Type = (transaction.Type ? transaction.Type.trim() : null);\r\n      const Description = (transaction.Description ? transaction.Description.trim() : null);\r\n      const Charges = (transaction.Charges ? transaction.Charges.trim() : null);\r\n      const Payments = (transaction.Payments ? transaction.Payments.trim() : null);\r\n      const Debit = (transaction.Debit ? transaction.Debit.trim() : null);\r\n      const Credit = (transaction.Credit ? transaction.Credit.trim() : null);\r\n\r\n      //Get the current date\r\n      const currentDate = new Date();\r\n\r\n      //Validate calculated values\r\n      const type = (\r\n        Object.keys(transaction).includes(\"Credit\") && Object.keys(transaction).includes(\"Debit\") ?\r\n          //Checking/Savings account\r\n          nullCoalesce(Type, (Credit && (Number(Credit) || Credit !== \"0\") ? \"Credit\" : (Debit && (Number(Debit) || Debit !== \"0\") ? \"Debit\" : null))) : (\r\n          Object.keys(transaction).includes(\"Charges\") && Object.keys(transaction).includes(\"Payments\") ?\r\n          //Credit Card account\r\n          nullCoalesce(Type, (Charges && (Number(Charges) || Charges !== \"0\") ? \"Charges\" : (Payments && (Number(Payments) || Payments !== \"0\") ? \"Payments\" : null))) :\r\n          null\r\n        )\r\n      );\r\n      const transactionDate = convertDateStringToDate(nullCoalesce(TransactionDate, _Date), \"MM/dd/yyyy\");\r\n      if (isFalsy(type) || isFalsy(transactionDate)) throw new Error(`Unable to read transaction.\\r\\n${transaction}`);\r\n\r\n      return {\r\n        PostedDate: (PostedDate ? convertDateStringToDate(PostedDate, \"MM/dd/yyyy\") : null),\r\n        TransactionDate: transactionDate,\r\n        AccountNumber: (AccountNumber ? `*${AccountNumber}` : null),\r\n        Type: type,\r\n        Description,\r\n        DescriptionDisplay: null,\r\n        Amount: Number(`${([\"Charges\",\"Debit\"].includes(type) ? \"-\" : \"\")}${transaction[type]}`),\r\n        Category: null,\r\n        Notes: null,\r\n        Tags: [],\r\n        BudgetCycle: getBudgetCycleFromDate(transactionDate),\r\n        IsAutoCategorized: false,\r\n        IsUpdatedByUser: false,\r\n        DateCreated: currentDate,\r\n        DateModified: currentDate,\r\n      };\r\n    });\r\n  }\r\n  catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const categorizeTransactionByDescription = function(transaction) {\r\n  const {DescriptionDisplay, Description, Category, Notes} = transaction;\r\n\r\n  //If\r\n  // 1) the transaction has already either\r\n  // been auto-categorized, or updated by the user, or\r\n  // 2) the transaction has no Description to categorized on,\r\n  // there is no need to auto-categorized this transaction,\r\n  // as either it has been auto-categorized, or the user\r\n  // manually updated the transaction data\r\n  if (\r\n    (isTransactionAutoCategorizedOrUpdatedByUser(transaction)) ||\r\n    !Description\r\n  ) return transaction;\r\n\r\n  //Define a base for categorized transaction data\r\n  let categorizedTransactionData = {};\r\n\r\n  //Define matches, if matched capture groups are needed\r\n  let matches;\r\n\r\n  //Income\r\n  // NOTE: Always sets budget cycle values to the next month's budget cycle\r\n       if (matches = Description.match(/ELECTRONIC\\/ACH CREDIT (\\w{5} \\w{2} , \\w{3}\\.) PAYROLL \\d{10}/i))  categorizedTransactionData = {Category: \"Infor payroll\", DescriptionDisplay: `${matches[1]}`, Notes: null, /*BudgetCycle: getBudgetCycleFromDate(new Date(TransactionDate.getMonth()+1))*/};\r\n  else if (matches = Description.match(/INTEREST PAYMENT PAID THIS STATEMENT THRU (\\d{2})\\/(\\d{2})/i))  categorizedTransactionData = {Category: \"Other income\", DescriptionDisplay: `Interest paid ${matches[1]}/${matches[2]}`, Notes: null, /*BudgetCycle: getBudgetCycleFromDate(new Date(TransactionDate.getMonth()+1))*/};\r\n\r\n  //Deposits\r\n  else if (Description.match(/MOBILE CHECK DEPOSIT/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: \"Mobile check deposit\", Notes: null};\r\n\r\n  //Withdrawals\r\n  else if (Description.match(/ATM CASH WITHDRAWAL (?:\\d{4} \\w{4} \\d{12}|[\\w ]+)/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: \"ATM withdrawal\", Notes: null};\r\n\r\n  //Transfers\r\n  else if (matches = Description.match(/ONLINE BANKING TRANSFER (?:CREDIT )?(?:MOBILE APP TRANSFER )?(To|From) (?:\\d{4} )?\\d{9}(\\d{4})/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: `Transfer ${matches[1].toLowerCase()} *${matches[2]}`, Notes: null};\r\n  else if (matches = Description.match(/AUTOMATIC TRANSFER DEBIT \\w+ \\w+ TRANSFER \\d{9}(\\d{4})-\\d \\d{10}/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: `Automatic transfer to *${matches[1]}`, Notes: null};\r\n  else if (matches = Description.match(/ZELLE TRANSFER (TO|FROM) ([\\w ]+) \\d{2}\\/\\d{2} \\w+/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: `Zelle transfer ${matches[1].toLowerCase()} ${toPascalCase(matches[2])}`, Notes: null};\r\n\r\n  //Payments\r\n  else if (matches = Description.match(/CREDIT CARD PAYMENT (?:MOBILE APP PAYMENT|ONLINE BANKING TRANSFER) TO \\d{4} \\d{6}\\*{6}(\\d{4})/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: `Payment for CCD *${matches[1]}`, Notes: null};\r\n  else if (matches = Description.match(/PAYMENT - \\w{5} \\w{3} \\w{7} \\w{2}/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: `Credit card payment`, Notes: null};\r\n\r\n  //Bills\r\n  else if (Description.match(/ELECTRONIC\\/ACH DEBIT PIEDMONT N\\. G\\. DRAFT \\d{13} \\d{10}/i))  categorizedTransactionData = {Category: \"Piedmont Natural Gas\", DescriptionDisplay: \"Piedmont Natural Gas\", Notes: null};\r\n  else if (Description.match(/ELECTRONIC\\/ACH DEBIT DUKEENERGY BILL PAY \\d{12} \\w{10}/i))  categorizedTransactionData = {Category: \"Duke Energy\", DescriptionDisplay: \"Duke Energy\", Notes: null};\r\n  else if (Description.match(/ELECTRONIC\\/ACH DEBIT SHARONVIEW FEDER RE PAYMENT \\d{10} \\d{10}/i))  categorizedTransactionData = {Category: \"Sharonview mortgage & escrow\", DescriptionDisplay: \"Sharonview mortgage\", Notes: null};\r\n  else if (Description.match(/ELECTRONIC\\/ACH DEBIT THOMASEHANNAHYMC PURCHASE \\d{10}/i))  categorizedTransactionData = {Category: \"YMCA membership\", DescriptionDisplay: \"YMCA membership\", Notes: null};\r\n  else if (Description.match(/Simplisafe 888-957-4675 Ma/i))  categorizedTransactionData = {Category: \"SimpliSafe (for mom)\", DescriptionDisplay: \"SimpliSafe\", Notes: null};\r\n  else if (Description.match(/SDC\\*Laurens Electric C Laurens SC/i))  categorizedTransactionData = {Category: \"Laurens Electric ProTec Security\", DescriptionDisplay: \"Laurens Electric ProTec Security\", Notes: null};\r\n  else if (Description.match(/SJWD Water District 8649492805 SC/i))  categorizedTransactionData = {Category: \"SJWD Water District\", DescriptionDisplay: \"SJWD Water\", Notes: null};\r\n  else if (Description.match(/State Farm Insurance 8009566310 Il/i))  categorizedTransactionData = {Category: \"State Farm auto insurance\", DescriptionDisplay: \"State Farm\", Notes: null};\r\n  else if (Description.match(/Spotify USA(?: New York NY)?/i))  categorizedTransactionData = {Category: \"Spotify Premium subscription\", DescriptionDisplay: \"Spotify Premium\", Notes: null};\r\n  else if (Description.match(/Netflix.Com Netflix.Com Ca/i))  categorizedTransactionData = {Category: \"Netflix Premium subscription\", DescriptionDisplay: \"Netflix Premium\", Notes: null};\r\n  else if (Description.match(/Ddv \\*Discoveryplus 0123456789 TN/i))  categorizedTransactionData = {Category: \"Discovery Plus subscription\", DescriptionDisplay: \"Discovery Plus\", Notes: null};\r\n  else if (Description.match(/(?:AT&T \\*Payment|ATT\\*BILL PAYMENT) 800-288-2020 TX/i))  categorizedTransactionData = {Category: \"AT&T Internet\", DescriptionDisplay: \"AT&T Internet\", Notes: null};\r\n  else if (Description.match(/KIRBY SANITATION (?:\\/C&J E )?8648778887 SC/i))  categorizedTransactionData = {Category: \"Kirby Sanitation\", DescriptionDisplay: \"Kirby Sanitation\", Notes: null};\r\n\r\n  //Recurring expenses\r\n\r\n  //Gas\r\n  else if (Description.match(/QT \\d+ (?:INSIDE|OUTSIDE|\\w+ \\w{2})/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"QuikTrip\", Notes: null};\r\n  else if (Description.match(/CIRCLE K # \\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"Circle K\", Notes: null};\r\n  else if (Description.match(/7-ELEVEN \\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"7-Eleven\", Notes: null};\r\n  else if (Description.match(/SPINX #\\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"Spinx\", Notes: null};\r\n  else if (Description.match(/LOVE S TRAVEL \\d+ [\\w ]+ \\w{2}/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"Love's\", Notes: null};\r\n  else if (Description.match(/SHELL OIL [\\d\\w]+ [\\w ]+ \\w{2}/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"Shell\", Notes: null};\r\n  else if (Description.match(/INGLES GAS EXP #\\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Gas\", DescriptionDisplay: \"Ingles Gas\", Notes: null};\r\n\r\n  //Groceies & Necessities\r\n  else if (Description.match(/Walmart Grocery [\\d-]+ Ar/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Walmart Supercenter\", Notes: \"grocery pickup\"};\r\n  else if (Description.match(/(?:Wal-Mart|WM Supercenter) #\\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Walmart Supercenter\", Notes: null};\r\n  else if (Description.match(/Target #?\\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Target\", Notes: null};\r\n  else if (Description.match(/Ingles Markets #\\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Ingles\", Notes: null};\r\n  else if (Description.match(/Publix #\\d+ \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Publix\", Notes: null};\r\n  else if (Description.match(/(?:Sams ?Club #8142 Spartanburg SC|Sams Club #8142 864-574-3480 SC)/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Sam's Club\", Notes: null};\r\n  else if (Description.match(/Walgreens #\\d+/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Walgreens\", Notes: null};\r\n  else if (Description.match(/Dollar Tree \\w+ \\w{2}/i)) categorizedTransactionData = {Category: \"Groceries/Necessities\", DescriptionDisplay: \"Dollar Tree\", Notes: null};\r\n\r\n  //Family Outings\r\n  else if (Description.match(/McDonald's \\w+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"McDonald's\", Notes: null};\r\n  else if (Description.match(/Burger King #\\d+(?: \\w+ \\w+ \\w{2})?/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Burger King\", Notes: null};\r\n  else if (Description.match(/Sonic Drive In #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Sonic Drive-In\", Notes: null};\r\n  else if (Description.match(/Cook Out [\\w ]+(?: \\w+ \\w{2})?/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Cook Out\", Notes: null};\r\n  else if (Description.match(/Wendys #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Wendy's\", Notes: null};\r\n  else if (Description.match(/Krystal [\\d\\w]+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Krystal\", Notes: null};\r\n  else if (Description.match(/Checkers Drive In \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Checkers\", Notes: null};\r\n  else if (Description.match(/Jack in the Box \\d+ \\w+/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Jack In The Box\", Notes: null};\r\n  else if (Description.match(/Wayback Burgers \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Wayback Burgers\", Notes: null};\r\n  else if (Description.match(/Arbys - \\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Arby's\", Notes: null};\r\n  else if (Description.match(/PDQ \\d+ (OLO )?Greenville SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"PDQ\", Notes: null};\r\n  else if (Description.match(/Chick-Fil-A #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Chick-fil-A\", Notes: null};\r\n  else if (Description.match(/Bojangles \\d+ \\w+/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Bojangles\", Notes: null};\r\n  else if (Description.match(/KFC \\w+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"KFC\", Notes: null};\r\n  else if (Description.match(/Popeyes \\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Popeyes\", Notes: null};\r\n  else if (Description.match(/Taco Bell #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Taco Bell\", Notes: null};\r\n  else if (Description.match(/(?:Chipotle \\d+ \\w+ \\w{2}|Chipotle Online 1800\\d{6} CA)/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Chipotle\", Notes: null};\r\n  else if (Description.match(/Taco Casa #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Taco Casa\", Notes: null};\r\n  else if (Description.match(/TST\\* WILLY TACO - HUB SPARTANBURG SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Willy Taco\", Notes: null};\r\n  else if (Description.match(/El Tejano Mexican Rest/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"El Tejano\", Notes: null};\r\n  else if (Description.match(/La Fogata Mexican Rest Simpsonville Sc/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"La Fogata\", Notes: null};\r\n  else if (Description.match(/El Molcajete Duncan Sc/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"El Molcajete\", Notes: null};\r\n  else if (Description.match(/CKE\\*TACO DOG SPARTANBU SPARTANBURG SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Taco Dog\", Notes: null};\r\n  else if (Description.match(/Tropical Grille \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Tropical Grille\", Notes: null};\r\n  else if (Description.match(/WAFFLE HOUSE \\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Waffle House\", Notes: null};\r\n  else if (Description.match(/Chili's \\w+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Chili's\", Notes: null};\r\n  else if (Description.match(/Paisanos Italian Resta/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Paisanos Italian Restaurant\", Notes: null};\r\n  else if (Description.match(/Sweet Basil Thai Cusin Greenville SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Sweet Basil Thai Cusine\", Notes: null};\r\n  else if (Description.match(/Panda Hibachi Duncan SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Panda Hibachi\", Notes: null};\r\n  else if (Description.match(/PF Changs #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"PF Changs\", Notes: null};\r\n  else if (Description.match(/Pizza Hut \\d+ \\d+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Pizza Hut\", Notes: null};\r\n  else if (Description.match(/Tutti Frutti Spartanburg SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Tutti Frutti\", Notes: null};\r\n  else if (Description.match(/KRISPY KREME \\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Krispy Kreme\", Notes: null};\r\n  else if (Description.match(/IHOP \\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"IHOP\", Notes: null};\r\n  else if (Description.match(/Applebees \\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Applebee's\", Notes: null};\r\n  else if (Description.match(/Dunkin #\\d+ \\w+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Dunkin\", Notes: null};\r\n  else if (Description.match(/Shipwreck Cove Duncan SC/i))  categorizedTransactionData = {Category: \"Family Outings\", DescriptionDisplay: \"Shipwreck Cove\", Notes: null};\r\n\r\n  //Church\r\n  else if (Description.match(/Brookwood Church Donat Simpsonville Sc/i))  categorizedTransactionData = {Category: \"Church\", DescriptionDisplay: \"Brookwood Church\", Notes: \"online giving\"};\r\n\r\n  //Personal Spending\r\n  else if (Description.match(/HARBOR FREIGHT TOOLS \\d \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Personal Spending\", DescriptionDisplay: \"Harbor Freight\", Notes: null};\r\n  else if (Description.match(/The Home Depot #\\d+ \\w+ \\w{2}/i))  categorizedTransactionData = {Category: \"Personal Spending\", DescriptionDisplay: \"The Home Depot\", Notes: null};\r\n\r\n  //Other\r\n  else if (Description.match(/Dollartree \\w+ \\w{2}/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: \"Dollar Tree\", Notes: null};\r\n  else if (Description.match(/[\\w\\* ]+ amzn.com\\/billwa/i))  categorizedTransactionData = {Category: null, DescriptionDisplay: \"Amazon\", Notes: null};\r\n  else if (Description.match(/SPARTANBURGCO TREAS 8645962603 SC/i))  categorizedTransactionData = {Category: \"Miscellaneous\", DescriptionDisplay: \"Spartanburg County Treasury\", Notes: null};\r\n  else if (matches = Description.match(/ELECTRONIC\\/ACH CREDIT IRS TREAS 310 ([\\w ]+) \\d{10}/i))  categorizedTransactionData = {Category: \"Miscellaneous\", DescriptionDisplay: `Internal Revenue Service ${matches[1]}`, Notes: null};\r\n\r\n  //If there was no match, return the original transaction\r\n  else return transaction;\r\n\r\n  //Final categorizedTransactionData\r\n  categorizedTransactionData = {\r\n    //only add a category/displayed description/notes, based on the description, if one is not already present\r\n    Category: Category || categorizedTransactionData.Category,\r\n    DescriptionDisplay: DescriptionDisplay || categorizedTransactionData.DescriptionDisplay,\r\n    Notes: Notes || categorizedTransactionData.Notes,\r\n    //BudgetCycle: categorizedTransactionData.BudgetCycle,\r\n  };\r\n\r\n  //Return the transaction with updated categorization data\r\n  return {\r\n    ...transaction,\r\n    ...categorizedTransactionData,\r\n    IsAutoCategorized: true,\r\n  };\r\n};\r\n\r\nexport const getTransactionDefaultDescriptionDisplay = function(transaction) {\r\n  return nullCoalesce(transaction.DescriptionDisplay, `*${transaction.Description}`) || \"\";\r\n};\r\n\r\nexport const formatTransactionDisplay = function(transaction) {\r\n  return {\r\n    ...transaction,\r\n    BudgetCycle: (transaction.BudgetCycle ? getBudgetCycleString(transaction.BudgetCycle) : \"\"),\r\n    PostedDate: (transaction.PostedDate ? new Date(transaction.PostedDate).toLocaleDateString().toString() : \"\"),\r\n    TransactionDate: (transaction.TransactionDate ? new Date(transaction.TransactionDate).toLocaleDateString().toString() : \"\"),\r\n    AccountNumber: transaction.AccountNumber || \"\",\r\n    Type: transaction.Type || \"\",\r\n    Description: transaction.Description || \"\",\r\n    DescriptionDisplay: transaction.DescriptionDisplay || \"\",\r\n    Amount: convertNumberToCurrency(transaction.Amount) || \"\",\r\n    Category: transaction.Category || \"\",\r\n    Notes: transaction.Notes || \"\",\r\n  };\r\n};\r\n\r\nexport const isTransactionDuplicate = (potentialDuplicate, transactions)=>{\r\n  return transactions.find(transaction=>\r\n    areObjectsEqual({\r\n      TransactionDate: transaction.TransactionDate.toJSON(),\r\n      Description: transaction.Description,\r\n      Amount: transaction.Amount,\r\n    }, {\r\n      TransactionDate: potentialDuplicate.TransactionDate.toJSON(),\r\n      Description: potentialDuplicate.Description,\r\n      Amount: potentialDuplicate.Amount,\r\n    }\r\n  ));\r\n};\r\n\r\nexport const getBudgetCyclesFromTransactions = transactions=>{\r\n  return [\r\n    ...new Set(\r\n      transactions.map(({BudgetCycle})=>getBudgetCycleFromDate(BudgetCycle))\r\n    )\r\n  ].map(date=>new Date(date));\r\n};\r\n\r\nexport const isTransactionAutoCategorizedOrUpdatedByUser = transaction=>{\r\n  return transaction.IsAutoCategorized === true || transaction.IsUpdatedByUser === true;\r\n};\r\n\r\nexport const getTransactionsAmountTotal = transactions=>{\r\n  return transactions.reduce((total, transaction)=>total+=transaction.Amount, 0);\r\n};\r\n","export const isFalsy = function(value) {\r\n  return value !== 0 && (!value || value == false);\r\n};\r\n\r\nexport const nullCoalesce = function(value) {\r\n  if(isFalsy(arguments)) throw new Error(\"Function cannot accept 0 parameters.\");\r\n  return [...arguments].reduce((accumulator, value)=>accumulator = (isFalsy(accumulator) && !isFalsy(value) ? value : accumulator), null);\r\n};\r\n\r\nexport const convertNumberToCurrency = function(value) {\r\n  if (isNaN(value)) return null;\r\n  return Number(value)\r\n    .toFixed(2)\r\n    .toString()\r\n    .replace(/\\d{4,}/, (p0)=>p0.split('').reverse().join('').replace(/(\\d{3})(?=\\d)/g, \"$1,\").split('').reverse().join('')) //add commas\r\n    .replace(/(\\d)/, \"$$$1\") //add $\r\n};\r\n\r\nexport const convertCSVToJSON = function(csv, delimiter = \",\") {\r\n  //Initialize variables\r\n  const csvData = csv\r\n    //Break apart by new line\r\n    .split(/(?:\\r\\n|\\r|\\n)/)\r\n    //Begin breaking apart each line by the delimiter\r\n    .map(line=>(!line ? null : line.split(delimiter)))\r\n    //Remove the empty lines\r\n    .filter(line=>line);\r\n\r\n  //Get the headers\r\n  const headers = csvData.splice(0,1)[0];\r\n\r\n  //Get the data\r\n  const obj = csvData.map(line=>{\r\n    const lineObj = {};\r\n    line.forEach((value, i)=>{\r\n      lineObj[headers[i]] = value;\r\n    })\r\n    return lineObj;\r\n  });\r\n\r\n  return obj;\r\n};\r\n\r\nexport const getSumByProp = (array, prop)=>{\r\n  //Make sure the provided object is an array\r\n  if (!Array.isArray(array)) {\r\n    //If its not even a single object, return null\r\n    if(!typeof array === \"object\") return null;\r\n\r\n    //Otherwise, wrap the object in an array for processing\r\n    array = [array]\r\n  }\r\n\r\n  return Number(array.reduce((sum, item)=>{\r\n    //If this an object, use the property\r\n    if (typeof item === \"object\") {\r\n      if (!Number.isNaN(item[prop])) return sum+=item[prop];\r\n    }\r\n\r\n    //Otherwise, if a number, use the item directly\r\n    if (!Number.isNaN(item)) return sum+=item;\r\n  }, 0)) || null;\r\n};\r\n\r\nexport const areObjectsEqual = (a,b)=>{\r\n  //## typeof values\r\n  //\"undefined\"\r\n  //\"boolean\"\r\n  //\"number\"\r\n  //\"bigint\"\r\n  //\"string\"\r\n  //\"symbol\"\r\n  //\"function\" (non-primitive)\r\n  //\"object\"  (non-primitive) //includes null\r\n\r\n  //\r\n  if (a === null) {\r\n    if (b === null) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //First, if not the same type, exit\r\n  const typeofA = typeof a;\r\n  const typeofB = typeof b;\r\n  if (typeofA !== typeofB) return false;\r\n\r\n  //If these are objects, recurse into them\r\n  if (typeofA === \"object\") {\r\n    const aValues = Object.entries(a);\r\n    const bValues = Object.entries(b);\r\n\r\n    //Short-circuit if the number of properties aren't the same\r\n    if(aValues.length !== bValues.length) return false;\r\n\r\n    for(let i = 0; i < aValues.length; i++) {\r\n      const [aKey, aValue] = aValues[i];\r\n      const [bKey, bValue] = bValues[i];\r\n      if(aKey !== bKey) return false;\r\n      if (!areObjectsEqual(aValue, bValue)) return false;\r\n    }\r\n\r\n    //If the objects properties/arrays values are all the same, return true\r\n    return true;\r\n  }\r\n\r\n  //Otherwise, compare the values\r\n  return a === b;\r\n};\r\n\r\nexport const convertDateStringToDate = (dateString, dateStringFormat)=>{\r\n  //Declare variables\r\n  const yearSymbol = \"y\";\r\n  const monthSymbol = \"M\";\r\n  const daySymbol = \"d\";\r\n\r\n  const yearFormatRegEx = new RegExp(`(${yearSymbol}{1,4})`, \"g\");\r\n  const monthFormatRegEx = new RegExp(`(${monthSymbol}{1,4})`, \"g\");\r\n  const dayFormatRegEx = new RegExp(`(${daySymbol}{1,2})`, \"g\");\r\n\r\n  const getDatePartByFormat = (dateString, dateStringFormat, datePartFormatRegex, getDatePartCallback)=>{\r\n    //Match against the provided format\r\n    const isMatch = [...dateStringFormat.matchAll(datePartFormatRegex)];\r\n\r\n    //If none were found, or more than one match is found, throw\r\n    if (!isMatch || isMatch.length > 1) throw new Error(`Error: Format \"${dateStringFormat}\" matched RegExp ${datePartFormatRegex.toString()} ${(isMatch ? isMatch.length : 0)} time${(isMatch ? \"s\" : \"\")}.`);\r\n\r\n    const matchStartingIndex = isMatch[0].index;\r\n    const matchedFormat = isMatch[0][1];\r\n    const matchEndingIndex = matchedFormat.length + matchStartingIndex;\r\n    const matchedString = dateString.substring(matchStartingIndex, matchEndingIndex);\r\n\r\n    //Return back the month index based on the format\r\n    return getDatePartCallback(matchedString, matchedFormat);\r\n  };\r\n\r\n  const getYearByFormat = (yearString, yearFormat)=>{\r\n    if (Number.isNaN(yearString)) return null;\r\n\r\n    if (yearFormat === \"yy\") return Number((new Date()).getFullYear().toString().substring(0,2)+yearString);\r\n    if (yearFormat === \"yyyy\") return Number(yearString);\r\n\r\n    return null;\r\n  };\r\n\r\n  const getMonthIndexByFormat = (monthString, monthFormat)=>{\r\n    if (monthFormat === \"M\") {\r\n      if (monthString === \"1\") return 0;\r\n      if (monthString === \"2\") return 1;\r\n      if (monthString === \"3\") return 2;\r\n      if (monthString === \"4\") return 3;\r\n      if (monthString === \"5\") return 4;\r\n      if (monthString === \"6\") return 5;\r\n      if (monthString === \"7\") return 6;\r\n      if (monthString === \"8\") return 7;\r\n      if (monthString === \"9\") return 8;\r\n      if (monthString === \"10\") return 9;\r\n      if (monthString === \"11\") return 10;\r\n      if (monthString === \"12\") return 11;\r\n    }\r\n    if (monthFormat === \"MM\") {\r\n      if (monthString === \"01\") return 0;\r\n      if (monthString === \"02\") return 1;\r\n      if (monthString === \"03\") return 2;\r\n      if (monthString === \"04\") return 3;\r\n      if (monthString === \"05\") return 4;\r\n      if (monthString === \"06\") return 5;\r\n      if (monthString === \"07\") return 6;\r\n      if (monthString === \"08\") return 7;\r\n      if (monthString === \"09\") return 8;\r\n      if (monthString === \"10\") return 9;\r\n      if (monthString === \"11\") return 10;\r\n      if (monthString === \"12\") return 11;\r\n    }\r\n    if (monthFormat === \"MMM\") {\r\n      if (monthString === \"Jan\") return 0;\r\n      if (monthString === \"Feb\") return 1;\r\n      if (monthString === \"Mar\") return 2;\r\n      if (monthString === \"Apr\") return 3;\r\n      if (monthString === \"May\") return 4;\r\n      if (monthString === \"Jun\") return 5;\r\n      if (monthString === \"Jul\") return 6;\r\n      if (monthString === \"Aug\") return 7;\r\n      if (monthString === \"Sep\") return 8;\r\n      if (monthString === \"Oct\") return 9;\r\n      if (monthString === \"Nov\") return 10;\r\n      if (monthString === \"Dec\") return 11;\r\n    }\r\n    if (monthFormat === \"MMMM\") {\r\n      if (monthString === \"January\") return 0;\r\n      if (monthString === \"February\") return 1;\r\n      if (monthString === \"March\") return 2;\r\n      if (monthString === \"April\") return 3;\r\n      if (monthString === \"May\") return 4;\r\n      if (monthString === \"June\") return 5;\r\n      if (monthString === \"July\") return 6;\r\n      if (monthString === \"August\") return 7;\r\n      if (monthString === \"September\") return 8;\r\n      if (monthString === \"October\") return 9;\r\n      if (monthString === \"November\") return 10;\r\n      if (monthString === \"December\") return 11;\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const getDayByFormat = (monthString, monthFormat)=>{\r\n    if (Number.isNaN(monthString) || Number(monthString) < 1 || Number(monthString) > 31) return null;\r\n\r\n    return Number(monthString);\r\n  };\r\n\r\n  return new Date(\r\n    getDatePartByFormat(dateString, dateStringFormat, yearFormatRegEx, getYearByFormat),\r\n    getDatePartByFormat(dateString, dateStringFormat, monthFormatRegEx, getMonthIndexByFormat),\r\n    getDatePartByFormat(dateString, dateStringFormat, dayFormatRegEx, getDayByFormat)\r\n  );\r\n};\r\n\r\nexport const isDescendantOf = (element, potentialParent) => {\r\n  if (\r\n    element.parentElement &&\r\n    potentialParent &&\r\n    element.parentElement !== potentialParent\r\n  ) return isDescendantOf(element.parentElement, potentialParent);\r\n\r\n  return element.parentElement != null &&\r\n    potentialParent != null &&\r\n    element.parentElement === potentialParent;\r\n};\r\n\r\nexport const matchValueAgainstValue = (value, matchedValue)=>{\r\n  //Perform validations\r\n  if (!value) value = \"\";\r\n  if (value instanceof Date) value = value.toJSON(); //perform Date before Number (as Date() is not NaN)\r\n  if (!isNaN(value)) value = value.toString();\r\n\r\n  if (!matchedValue) matchedValue = \"\";\r\n  if (matchedValue instanceof Date) matchedValue = matchedValue.toJSON(); //perform Date before Number (as Date() is not NaN)\r\n  if (!isNaN(matchedValue)) matchedValue = matchedValue.toString();\r\n\r\n  //Escape the matched value to prepare for RegExp\r\n  const escapedMatchedValue = matchedValue.replace(/([-\\/\\\\^$*+?.()|[\\]{}])/g, '\\\\$1');\r\n\r\n  return value.match(new RegExp(`(${escapedMatchedValue})`, \"i\"));\r\n};\r\n","import {getSumByProp} from './utilities.js';\r\nimport {parseGoogleSheetsNumber} from './../googleApi';\r\n\r\nexport const isCreditCardPaymentTransaction = transaction=>{\r\n  return transaction.Description.match(/PAYMENT - THANK YOU ATLANTA GA/i);\r\n};\r\n\r\nexport const isIncomeTransaction = transaction=>{\r\n  return transaction.Description.match(/ELECTRONIC\\/ACH CREDIT INFOR US , INC\\. PAYROLL 3203469219/i);\r\n};\r\n\r\nexport const getBudgetAmountSpentFromTransactions = (budgetName, transactions)=>{\r\n  const check = transaction=>{\r\n    return (\r\n      //For the Miscellaneous budget, include non-income transactions with no category\r\n      budgetName === \"Miscellaneous\" ?\r\n      [budgetName, null].includes(transaction.Category) && !isCreditCardPaymentTransaction(transaction) && !isIncomeTransaction(transaction) :\r\n      transaction.Category === budgetName\r\n    )\r\n  };\r\n  return getSumByProp(transactions.filter(transaction=>check(transaction)), \"Amount\");\r\n};\r\n\r\nexport const typeCheckBudgetsData = budgetsData=>{\r\n  return budgetsData.map(budgetData=>({\r\n      ...budgetData,\r\n      Amount: parseGoogleSheetsNumber(budgetData.Amount),\r\n    })\r\n  );\r\n};\r\n","export const getMonthFromNumber = number=>{\r\n  switch (number) {\r\n    case 0:\r\n      return \"January\";\r\n    case 1:\r\n      return \"February\";\r\n    case 2:\r\n      return \"March\";\r\n    case 3:\r\n      return \"April\";\r\n    case 4:\r\n      return \"May\";\r\n    case 5:\r\n      return \"June\";\r\n    case 6:\r\n      return \"July\";\r\n    case 7:\r\n      return \"August\";\r\n    case 8:\r\n      return \"September\";\r\n    case 9:\r\n      return \"October\";\r\n    case 10:\r\n      return \"November\";\r\n    case 11:\r\n      return \"December\";\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getNumberFromMonth = month=>{\r\n  switch (month) {\r\n    case \"January\":\r\n      return 0;\r\n    case \"February\":\r\n      return 1;\r\n    case \"March\":\r\n      return 2;\r\n    case \"April\":\r\n      return 3;\r\n    case \"May\":\r\n      return 4;\r\n    case \"June\":\r\n      return 5;\r\n    case \"July\":\r\n      return 6;\r\n    case \"August\":\r\n      return 7;\r\n    case \"September\":\r\n      return 8;\r\n    case \"October\":\r\n      return 9;\r\n    case \"November\":\r\n      return 10;\r\n    case \"December\":\r\n      return 11;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const getBudgetCycleFromDate = date=>{\r\n  return new Date(date.getFullYear(), date.getMonth());\r\n};\r\n\r\nexport const getBudgetCycleString = budgetCycle=>{\r\n  return `${getMonthFromNumber(budgetCycle.getMonth())} ${budgetCycle.getFullYear()}`;\r\n};\r\n\r\nexport const getBudgetCycleFromBudgetCycleString = budgetCycleString=>{\r\n  const [matches, monthString, yearString] = budgetCycleString.match(/(\\w+) (\\d{4})/);\r\n  const year = Number(yearString);\r\n  const month = getNumberFromMonth(monthString);\r\n\r\n  return new Date(year, month);\r\n};\r\n\r\nexport const getBudgetCycleDescription = (budgetCycle, todayBudgetCycle=(new Date()))=>{\r\n  const fullYearDifference = todayBudgetCycle.getFullYear() - budgetCycle.getFullYear();\r\n  const monthDifference = (fullYearDifference*12) + (todayBudgetCycle.getMonth() - budgetCycle.getMonth());\r\n  if (monthDifference < 0) return null;\r\n  if (monthDifference === 0) return \"current\";\r\n  if (monthDifference === 1) return \"last month\";\r\n  if (monthDifference < 12) return `${monthDifference} month${monthDifference===1?\"\":\"s\"} ago`;\r\n  const yearDifference = Math.floor(monthDifference/12);\r\n  return `${yearDifference} year${yearDifference===1?\"\":\"s\"} ago`;\r\n}\r\n","export const throwException = (err, throwEx=true, alertWindow=true)=>{\r\n  //Build an exception to throw\r\n  let exception = {};\r\n  let errorMsg = null;\r\n\r\n  //If this is a Javascript exception\r\n  if (err instanceof Error) {\r\n    errorMsg = err.message;\r\n\r\n    exception.name = err.name\r\n    if (err.description === 0 || err.description) exception.description = err.description;\r\n    if (err.number === 0 || err.number) exception.number = err.number;\r\n    if (err.fileName === 0 || err.fileName) exception.fileName = err.fileName;\r\n    if (err.lineNumber === 0 || err.lineNumber) exception.lineNumber = err.lineNumber;\r\n    if (err.columnNumber === 0 || err.columnNumber) exception.columnNumber = err.columnNumber;\r\n    if (err.stack === 0 || err.stack) exception.stack = err.stack;\r\n  }\r\n  else if (typeof err === \"object\") {\r\n    if (err.message) {\r\n      errorMsg = err.message;\r\n      delete err.message;\r\n    }\r\n    exception = {\r\n      ...exception,\r\n      ...err,\r\n    }\r\n  }\r\n  else if (typeof err === \"string\") {\r\n    errorMsg = err;\r\n  }\r\n\r\n  //Log the original error, for investigation\r\n  console.error(\"throwException()\", err);\r\n\r\n  //Send a prettified version of the error to the screen\r\n  const exceptionMsg = `${errorMsg}\\r\\n${Object.entries(exception).length ? Object.entries(exception).map(([key, value])=>`  + ${key}: ${value}\\r\\n`).join(\"\") : ''}\\r\\nThe application failed.`;\r\n\r\n  if (alertWindow) window.alert(exceptionMsg);\r\n\r\n  //Throw the original error\r\n  if (throwEx) throw err;\r\n}\r\n","import {getSheetsSpreadsheetValues, updateSheetsSpreadsheetValues} from './../googleApi';\r\nimport {throwException} from './../utilities';\r\n\r\nexport const getTransactions = async ()=>{\r\n  try {\r\n    return await getSheetsSpreadsheetValues(\"Transactions Data\");\r\n  }\r\n  catch (err) {\r\n    throwException(err, false);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const updateTransactions = async transactions=>{\r\n  try {\r\n    return await updateSheetsSpreadsheetValues(\"Transactions Data\", transactions);\r\n  }\r\n  catch (err) {\r\n    throwException(err, false);\r\n    return [];\r\n  }\r\n};\r\n","import {getSheetsSpreadsheetValues} from './../googleApi';\r\nimport {throwException} from './../utilities';\r\n\r\nexport const getBudgetsData = async ()=>{\r\n  try {\r\n    return await getSheetsSpreadsheetValues(\"Budgets Data\");\r\n  }\r\n  catch (err) {\r\n    throwException(err, false);\r\n    return [];\r\n  }\r\n};\r\n","import {getSheetsSpreadsheetValues} from './../googleApi';\r\nimport {throwException} from './../utilities';\r\n\r\nexport const getAccountsData = async ()=>{\r\n  try {\r\n    return await getSheetsSpreadsheetValues(\"Accounts Data\");\r\n  }\r\n  catch (err) {\r\n    throwException(err, false);\r\n    return [];\r\n  }\r\n};\r\n","import {getSheetsSpreadsheetValues} from './../googleApi';\r\nimport {throwException} from './../utilities';\r\n\r\nexport const getAccountData = async ()=>{\r\n  try {\r\n    return await getSheetsSpreadsheetValues(\"Account Data\");\r\n  }\r\n  catch (err) {\r\n    throwException(err, false);\r\n    return [];\r\n  }\r\n};\r\n","import {useEffect} from 'react';\r\n\r\nconst useConsoleLog = (object, ...args)=>{\r\n  return useEffect(()=>console.log(args[0], object, ...args.slice(1)), [object, args])\r\n};\r\n\r\nexport default useConsoleLog;\r\n","import {useState, useEffect} from 'react';\r\n\r\nconst useScript = (src, optionsParam)=>{\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  useEffect(()=>{\r\n    new Promise((resolve, reject)=>{\r\n      //Create default options\r\n      const defaultOptions = {\r\n        async: true,\r\n      };\r\n\r\n      //Create the script tag that will be attached to the DOM\r\n      const script = document.createElement(\"script\");\r\n\r\n      //Combine the options, overwriting the defaults\r\n      const options = {\r\n        ...defaultOptions,\r\n        ...optionsParam,\r\n      };\r\n\r\n      //Attach the options to the script tag\r\n      Object.entries(options).forEach(([option, value])=>script[option] = value);\r\n\r\n      //Attach the src to the script tag\r\n      script.src = src;\r\n\r\n      const onLoad = event=>{\r\n        setIsLoaded(true)\r\n        return resolve(event);\r\n      };\r\n\r\n      const onError = event=>{\r\n        return reject(event);\r\n      };\r\n\r\n      //Create onload & onerror callbacks\r\n      script.addEventListener(\"load\", onLoad)\r\n      script.addEventListener(\"error\", onError);\r\n\r\n      document.body.appendChild(script);\r\n\r\n      return ()=>{\r\n        document.body.removeChild(script);\r\n        setIsLoaded(false);\r\n      }\r\n    });\r\n  }, [src, optionsParam]);\r\n\r\n  return isLoaded;\r\n};\r\n\r\nexport default useScript;\r\n","import {useState, useEffect} from 'react';\r\n\r\nimport {getBudgetCycleFromDate} from './../utilities';\r\n\r\nconst useBudgetCycleTransactions = (transactions, budgetCycle)=>{\r\n  //Declare functions\r\n  const getLastBudgetCycleIncomeTransactions = (transactions, budgetCycle)=>{\r\n    //Get income transactions from last budget cycle\r\n    if (!transactions.length || !budgetCycle) return [];\r\n\r\n    return transactions.filter(transaction=>[\"Infor payroll\", \"Other income\"].includes(transaction.Category));\r\n  };\r\n\r\n  const getCurrentBudgetCycleIncomeTransactions = (transactions, budgetCycle)=>{\r\n    //Get other income transactions from this budget cycle\r\n    if (!transactions.length || !budgetCycle) return [];\r\n\r\n    return transactions.filter(transaction=>![\"Infor payroll\", \"Other income\"].includes(transaction.Category) && transaction.Amount >= 0 && !transaction.Description.match(/CREDIT CARD PAYMENT (?:MOBILE APP PAYMENT|ONLINE BANKING TRANSFER) TO \\d{4} \\d{6}\\*{6}(\\d{4})/i) && !transaction.Description.match(/PAYMENT - \\w{5} \\w{3} \\w{7} \\w{2}/i));\r\n  };\r\n\r\n  const getCurrentBudgetCycleExpenseTransactions = (transactions, budgetCycle)=>{\r\n    //Get expense transactions from this budget cycle\r\n    if (!transactions.length || !budgetCycle) return [];\r\n\r\n    return transactions.filter(transaction=>![\"Infor payroll\", \"Other income\"].includes(transaction.Category) && transaction.Amount < 0 && !transaction.Description.match(/CREDIT CARD PAYMENT (?:MOBILE APP PAYMENT|ONLINE BANKING TRANSFER) TO \\d{4} \\d{6}\\*{6}(\\d{4})/i) && !transaction.Description.match(/PAYMENT - \\w{5} \\w{3} \\w{7} \\w{2}/i));\r\n  };\r\n\r\n  const getBudgetCycleTransactions = (transactions, budgetCycle)=>{\r\n    //Get transactions marked with this budgetCycle\r\n    // (or with a Date of this budget cycle, if no BudgetCycle)\r\n    const currentBudgetCycleTransactions = transactions.filter(transaction=>\r\n      //Transactions with this budget cycle\r\n      getBudgetCycleFromDate(transaction.BudgetCycle || transaction.TransactionDate).getTime() === budgetCycle.getTime()\r\n      &&\r\n      //Remove payment transactions\r\n      !(transaction.Type === \"Payment\")\r\n      &&\r\n      //Remove corresponding credit/debit transfers\r\n      !(transaction.Type===\"Transfer\" && transactions.find(transaction2=>\r\n        transaction.TransactionDate.getTime()===transaction2.TransactionDate.getTime() &&\r\n        transaction.Amount===-transaction2.Amount &&\r\n        transaction.DescriptionDisplay.match(/\\*(\\d{4})/)[1]===transaction2.AccountNumber.match(/\\*(\\d{4})/)[1] &&\r\n        transaction.AccountNumber.match(/\\*(\\d{4})/)[1]===transaction2.DescriptionDisplay.match(/\\*(\\d{4})/)[1]\r\n      ))\r\n    );\r\n\r\n    console.log(\r\n      \"useBudgetCycleTransactions filtered corresponding credit/debit transfers\",\r\n      transactions.filter(transaction=>getBudgetCycleFromDate(transaction.BudgetCycle || transaction.TransactionDate).getTime() === budgetCycle.getTime()\r\n      &&\r\n      //Remove payment transactions\r\n      !(transaction.Type === \"Payment\")\r\n      &&\r\n      transaction.Type===\"Transfer\" && transactions.find(transaction2=>\r\n        transaction.TransactionDate.getTime()===transaction2.TransactionDate.getTime() &&\r\n        transaction.Amount===-transaction2.Amount &&\r\n        transaction.DescriptionDisplay.match(/\\*(\\d{4})/)[1]===transaction2.AccountNumber.match(/\\*(\\d{4})/)[1] &&\r\n        transaction.AccountNumber.match(/\\*(\\d{4})/)[1]===transaction2.DescriptionDisplay.match(/\\*(\\d{4})/)[1]\r\n      ))\r\n    );\r\n\r\n    //Get last budget cycle's income\r\n    const lastBudgetCycleIncomeTransactions = getLastBudgetCycleIncomeTransactions(currentBudgetCycleTransactions, budgetCycle);\r\n\r\n    //Get this budget cycle's other income\r\n    const currentBudgetCycleIncomeTransactions = getCurrentBudgetCycleIncomeTransactions(currentBudgetCycleTransactions, budgetCycle);\r\n\r\n    //Get this month's transactions (minus income)\r\n    const currentBudgetCycleExpenseTransactions = getCurrentBudgetCycleExpenseTransactions(currentBudgetCycleTransactions, budgetCycle);\r\n\r\n    const budgetCycleTransactionsReturn = {\r\n      income: [...lastBudgetCycleIncomeTransactions, ...currentBudgetCycleIncomeTransactions],\r\n      expenses: currentBudgetCycleExpenseTransactions,\r\n      get all() {return [...this.income, ...this.expenses].flat()},\r\n    };\r\n\r\n    console.log(\"budgetCycleTransactions\", budgetCycleTransactionsReturn);\r\n\r\n    return budgetCycleTransactionsReturn;\r\n  };\r\n\r\n  //Initialize state\r\n  const [budgetCycleTransactions, setBudgetCycleTransactions] = useState(getBudgetCycleTransactions(transactions, budgetCycle));\r\n\r\n  //Whenever transactions or budgetCycle changes,\r\n  // update state\r\n  useEffect(()=>\r\n    setBudgetCycleTransactions(getBudgetCycleTransactions(transactions, budgetCycle))\r\n  , [transactions, budgetCycle]);\r\n\r\n  //Return the state\r\n  return budgetCycleTransactions;\r\n};\r\n\r\nexport default useBudgetCycleTransactions;\r\n","import {Link} from 'react-router-dom';\r\n\r\nimport './index.scss';\r\n\r\nconst Logo = ({ light })=>{\r\n  return (\r\n    <Link className={`navbar-brand d-flex align-items-center ${(light !== undefined ? \"text-light\" : \"\")}`} to=\"/\">\r\n      <i className={`dashboard-header-logo fas fa-sliders-h  ${(light !== undefined ? \"\" : \"text-primary\")} fs-3`}></i>\r\n      <h1 className=\"display-5 ms-2 mb-0\">ldgr</h1>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default Logo;\r\n","import {signIn} from './../../googleApi'\r\n\r\nimport './index.scss';\r\n\r\nconst GoogleApiSigninButton = ({ isReadyForSignIn })=>{\r\n  return (\r\n    <button className=\"btn btn-primary\" type=\"button\" onClick={signIn} disabled={!isReadyForSignIn}>Sign in with Google</button>\r\n  );\r\n};\r\n\r\nexport default GoogleApiSigninButton;\r\n","import Logo from './../Logo';\r\nimport GoogleApiSignInButton from './../GoogleApiSignInButton';\r\n\r\nimport './index.scss';\r\n\r\nconst SignInView = ({ isReadyForSignIn })=>{\r\n  return (\r\n    <div className=\"view signin-view container-fluid\">\r\n      <div className=\"container-fluid d-flex flex-column justify-content-center align-items-center min-vh-100\">\r\n        <Logo />\r\n        <GoogleApiSignInButton isReadyForSignIn={isReadyForSignIn} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignInView;\r\n","import {getBudgetCycleString, getBudgetCycleDescription} from './../../utilities';\r\n\r\nimport './index.scss';\r\n\r\nconst DashboardBudgetCycleDropdown = ({ transactions, budgetCycle, allBudgetCycles, onChange:onChangeProp })=>{\r\n  const onClick = event=>{\r\n    const budgetCycleJSON = event.target.getAttribute(\"data-budget-cycle\");\r\n    if (!budgetCycleJSON) return;\r\n    const budgetCycle = new Date(budgetCycleJSON);\r\n    onChangeProp(budgetCycle);\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-month-dropdown dropdown\">\r\n      <button id=\"dashboardMonthDropdown\" className=\"btn dropdown-toggle container-fluid\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n        <strong className=\"dashboard-month-dropdown-month h2 d-block mb-0\">\r\n          {getBudgetCycleString(budgetCycle)}\r\n        </strong>\r\n        <em className=\"dashboard-month-dropdown-month-description d-block text-muted h6\">({getBudgetCycleDescription(budgetCycle)})</em>\r\n      </button>\r\n      <ul className=\"dropdown-menu container-fluid\" onClick={onClick}>\r\n        {allBudgetCycles.map(budgetCycle=>(\r\n          <li key={budgetCycle.toJSON()}>\r\n            <a className=\"dropdown-item\" data-budget-cycle={budgetCycle.toJSON()}>\r\n              {getBudgetCycleString(budgetCycle)} <em className=\"text-muted\">({getBudgetCycleDescription(budgetCycle)})</em>\r\n            </a>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardBudgetCycleDropdown;\r\n","import {convertNumberToCurrency} from './../../utilities';\r\nimport {useBudgetCycleTransactions} from './../../hooks';\r\n\r\nimport DashboardBudgetCycleDropdown from './../DashboardBudgetCycleDropdown';\r\n\r\nimport './index.scss';\r\n\r\nconst DashboardTop = ({ transactions, accountsData, accountData, budgetCycle, allBudgetCycles, onBudgetCycleChange })=>{\r\n  const budgetCycleTransactions = useBudgetCycleTransactions(transactions, budgetCycle);\r\n\r\n  const currentBudgetCycleIncome = budgetCycleTransactions.income.length && budgetCycleTransactions.income.reduce((total, t)=>total+=t.Amount, 0);\r\n  const currentBudgetCycleExpenses = budgetCycleTransactions.expenses.length && budgetCycleTransactions.expenses.reduce((total, t)=>total+=t.Amount, 0);\r\n  const currentBudgetCycleRemaining = currentBudgetCycleIncome+currentBudgetCycleExpenses;\r\n\r\n  const getLastUpdatedDate = transactions=>{\r\n    if (!transactions.length) return null;\r\n\r\n    return new Date(Math.max(...transactions.map(t=>[t.DateCreated.getTime(), t.DateModified.getTime()]).flat()));\r\n  };\r\n\r\n  return (\r\n    <div className=\"dashboard-top\">\r\n      <div className=\"dashboard-account-overview container-fluid py-2 px-3\">\r\n        <div className=\"container-fluid text-end text-muted my-2\">\r\n          Last Updated:&nbsp;\r\n          <span className=\"dashboard-accounts-total d-inline\">{getLastUpdatedDate(transactions) ? getLastUpdatedDate(transactions).toLocaleDateString() : \"--\"}</span>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"dashboard-accounts-total-container col text-center fw-bold h4 d-flex flex-column border-end border-2\">\r\n            Month Remaining:\r\n            <span className=\"dashboard-accounts-total\">{currentBudgetCycleRemaining ? convertNumberToCurrency(currentBudgetCycleRemaining) : \"--\"}</span>\r\n          </div>\r\n          <div className=\"dashboard-credit-score-container col text-center fw-bold h4 d-flex flex-column\">\r\n            Credit Score:\r\n            <span className=\"dashboard-credit-score\">{(accountData.length ? accountData.sort((a,b)=>a.LastUpdated+b.LastUpdated)/*sort descending*/.filter(record=>record.CreditScore)[0].CreditScore /*most recent LastUpdated*/ : \"--\")}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <DashboardBudgetCycleDropdown transactions={transactions} budgetCycle={budgetCycle} allBudgetCycles={allBudgetCycles} onChange={onBudgetCycleChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardTop;\r\n","import './index.scss';\r\n\r\nconst DashboardInsight = ({ insight })=>{\r\n  let iconClass = insight.iconClass;\r\n  if (!iconClass) {\r\n    if (insight.type === \"primary\") {\r\n      iconClass = \"fas fa-xs fa-info-circle\";\r\n    }\r\n    else if (insight.type === \"success\") {\r\n      iconClass = \"fas fa-xs fa-check-circle\";\r\n    }\r\n    else if (insight.type === \"warning\") {\r\n      iconClass = \"fas fa-xs fa-exclamation-triangle\";\r\n    }\r\n    else if (insight.type === \"danger\") {\r\n      iconClass = \"fas fa-xs fa-times-circle\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`dashboard-insight alert alert-${insight.type}`}>\r\n      <div>\r\n        <i className={\"fas fa-sliders-h me-1\"}></i>\r\n        <h3 className=\"d-inline-block\">{insight.title}</h3>\r\n      </div>\r\n      <i className={`${iconClass} me-1`}></i>\r\n      <span>{insight.text}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardInsight;\r\n","import {useState, useEffect} from 'react';\r\n\r\nimport DashboardInsight from './../DashboardInsight';\r\nimport {convertNumberToCurrency, getBudgetAmountSpentFromTransactions} from './../../utilities';\r\n\r\nimport './index.scss';\r\n\r\nconst DashboardInsights = ({ budgetCycleTransactions, budgetsData })=>{\r\n  const [insights, setInsights] = useState([]);\r\n\r\n  const runInsights = ()=>{\r\n    if (!budgetCycleTransactions.all.length || !budgetsData.length) return;\r\n\r\n    //First, remove all insights\r\n    setInsights([]);\r\n\r\n    /* Check if there is money left in the \"Personal Spending\" budget */\r\n    const personalSpendingBudgetData = budgetsData.find(budgetData=>budgetData.Name===\"Personal Spending\");\r\n    const personalSpendingBudgetLeft = getBudgetAmountSpentFromTransactions(\"Personal Spending\", budgetCycleTransactions.all) - personalSpendingBudgetData.Amount;\r\n    if (personalSpendingBudgetLeft > 0) {\r\n      const insight = {\r\n        type: \"primary\",\r\n        title: \"Insights\",\r\n        text: `You have ${convertNumberToCurrency(personalSpendingBudgetLeft)} left in \"Personal Spending\".`\r\n      };\r\n      setInsights(previousInsights=>[...previousInsights, insight]);\r\n    }\r\n\r\n    /* Check if we spent more than last month */\r\n    //const currentBudgetSpent = transactions.reduce((total,i)=>total+=i.amount);\r\n    //const lastBudgetSpent = transactions.reduce((total,i)=>total+=i.amount);\r\n    //const budgetCycleDifference = lastBudgetSpent-currentBudgetSpent;\r\n    // if (budgetCycleDifference > 0) {\r\n    //   const insight = {\r\n    //     type: \"danger\",\r\n    //     iconClass: \"fas fa-sliders-h\",\r\n    //     title: \"Insights\",\r\n    //     text: `You've spent ${convertNumberToCurrency(budgetCycleDifference)} more than last month.`\r\n    //   };\r\n    //   setInsights([...insights, insight]);\r\n    // }\r\n\r\n    /* Check if a bill has gone up */\r\n    const bills = budgetsData.filter(budgetData=>budgetData.type===\"bill\");\r\n    bills.forEach(bill=>{\r\n      const amountSpent = getBudgetAmountSpentFromTransactions(bill.name, budgetCycleTransactions.all)\r\n      if (!amountSpent) return;\r\n      if (Math.abs(amountSpent) > Math.abs(bill.amount)) {\r\n        const insight = {\r\n          type: \"warning\",\r\n          title: \"Insights\",\r\n          text: `Bill \"${bill.name}\" has gone up ${convertNumberToCurrency(Math.abs(amountSpent)-Math.abs(bill.amount))}.`\r\n        };\r\n        setInsights(previousInsights=>[...previousInsights, insight]);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(()=>{\r\n    runInsights();\r\n  }, [budgetCycleTransactions, budgetsData]);\r\n\r\n  return (\r\n    <div className=\"dashboard-insights container mt-5\">\r\n      <h2 className=\"text-center mb-4\">Insights</h2>\r\n      {insights.map((insight,i)=>(\r\n        <DashboardInsight key={i} insight={insight} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardInsights;\r\n","import './index.scss';\r\n\r\nconst DashboardShowcase = ()=>{\r\n  return (\r\n    <div className=\"dashboard-showcase container d-flex flex-column justify-content-center align-items-center bg-primary text-light my-3 mx-auto\">\r\n      <i className=\"fas fa-check-circle fa-2x mb-4\"></i>\r\n      <h3 className=\"fw-bold h2\">All good!</h3>\r\n      <span className=\"h6\">You are on track for this month.</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardShowcase;\r\n","import DashboardInsights from './../DashboardInsights';\r\nimport DashboardShowcase from './../DashboardShowcase';\r\n\r\nimport './index.scss';\r\n\r\nconst DashboardContent = ({ budgetCycleTransactions, budgetsData })=>{\r\n  return (\r\n    <div className=\"dashboard-content container-fluid overflow-auto\">\r\n      <DashboardShowcase />\r\n      <DashboardInsights budgetCycleTransactions={budgetCycleTransactions} budgetsData={budgetsData} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardContent;\r\n","import {useEffect} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nimport {useBudgetCycleTransactions} from './../../hooks';\r\n\r\nimport './index.scss';\r\n\r\nimport DashboardTop from './../DashboardTop';\r\nimport DashboardContent from './../DashboardContent';\r\n\r\nconst DashboardView = ({ signedInUser, transactions, accountsData, accountData, budgetsData, budgetCycle, allBudgetCycles, onBudgetCycleChange, setFooterNavbar })=>{\r\n  //Send the route to the footer navbar\r\n  const route = useLocation().pathname;\r\n  useEffect(()=>{\r\n    setFooterNavbar(route);\r\n  }, [route]);\r\n\r\n  const budgetCycleTransactions = useBudgetCycleTransactions(transactions, budgetCycle);\r\n\r\n  return (\r\n    <div className=\"view dashboard-view d-flex flex-column\">\r\n      <main className=\"main flex-grow-1\">\r\n        <DashboardTop transactions={transactions} accountsData={accountsData} accountData={accountData} budgetCycle={budgetCycle} allBudgetCycles={allBudgetCycles} onBudgetCycleChange={onBudgetCycleChange} />\r\n        <DashboardContent budgetCycleTransactions={budgetCycleTransactions} budgetsData={budgetsData} />\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardView;\r\n","import './index.scss';\r\n\r\nconst BudgetGraphStatusIcon = ({ budget, overBudget, overEarned })=> {\r\n  let iconClass;\r\n  let iconText;\r\n  let iconColor;\r\n\r\n  if (budget.Type === \"bill\") {\r\n    if (budget.amountSpent) {\r\n      if (!overBudget) {\r\n        iconClass = \"fas fa-check-circle\";\r\n        iconText = \"Paid\";\r\n        iconColor = \"success\";\r\n      }\r\n      else {\r\n        iconClass = \"fas fa-times-circle\";\r\n        iconText = \"Overpaid\";\r\n        iconColor = \"danger\";\r\n      }\r\n    }\r\n    else {\r\n      iconClass = \"\";\r\n      iconText = \"Pending\";\r\n      iconColor = \"secondary\";\r\n    }\r\n  }\r\n  if (budget.Type === \"income\") {\r\n    if (budget.amountSpent) {\r\n      if (budget.amountSpent === budget.Amount) {\r\n        iconClass = \"fas fa-check-circle\";\r\n        iconText = \"Earned\";\r\n        iconColor = \"success\";\r\n      }\r\n      else if (overEarned) {\r\n        iconClass = \"fas fa-check-circle\";\r\n        iconText = \"Over-earned\";\r\n        iconColor = \"success\";\r\n      }\r\n      else if (!overEarned) {\r\n        iconClass = \"fas fa-exclamation-triangle\";\r\n        iconText = \"Under-earned\";\r\n        iconColor = \"warning\";\r\n      }\r\n    }\r\n  }\r\n\r\n  //If there's an icon to render, render\r\n  if (iconText) {\r\n    return (\r\n      <div className={`budget-graph-status-icon-container d-inline-block badge rounded-pill text-${iconColor} bg-light ms-1 border border-${iconColor}`}>\r\n        <i className={`budget-graph-status-icon fas fa-xs ${iconClass} me-1`}></i>\r\n        <span>{iconText}</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  //Otherwise, return null\r\n  return null;\r\n};\r\n\r\nexport default BudgetGraphStatusIcon;\r\n","import {convertNumberToCurrency} from './../../utilities';\r\n\r\nimport BudgetGraphStatusIcon from './../BudgetGraphStatusIcon';\r\n\r\nimport './index.scss';\r\n\r\nconst BudgetGraph = ({ budget })=>{\r\n  const isExpenseBudget = budget.Type !== \"income\";\r\n  const overBudget = (isExpenseBudget ? budget.amountSpent < budget.Amount : false);\r\n  const overEarned = (!isExpenseBudget ? budget.amountSpent > budget.Amount : false);\r\n\r\n  return (\r\n    <div className=\"budget-graph-container my-4\">\r\n      <h5 className=\"budget-graph-title d-inline-block\">{budget.Name}</h5>\r\n      <BudgetGraphStatusIcon budget={budget} overBudget={overBudget} overEarned={overEarned} />\r\n      <div className=\"budget-graph-bar-outer\">\r\n        <h6 className=\"budget-graph-bar-stats\" style={\r\n          {\r\n            color: (!overBudget\r\n              ? \"black\" //\"rgb(245,245,245)\"\r\n              : \"red\"\r\n            ),\r\n          }\r\n        }>\r\n          {convertNumberToCurrency(Math.abs(budget.amountSpent))} of {convertNumberToCurrency(Math.abs(budget.Amount))} {(isExpenseBudget ? \"spent\" : \"earned\")}\r\n        </h6>\r\n        <h6 className=\"budget-graph-bar-remaining text-muted\" >\r\n          {convertNumberToCurrency(budget.Amount - budget.amountSpent)} {(overBudget ? \"overspent\" : \"remaining\")}\r\n        </h6>\r\n        <div className=\"budget-graph-bar-inner\" style={\r\n          {\r\n            backgroundColor: (!isExpenseBudget ? \"green\" :  (overBudget ? \"red\" : budget.color)),\r\n            width: (overBudget\r\n              ? `calc(100% * ${(budget.amountSpent - budget.Amount)/budget.Amount})`\r\n              : `calc(100% * ${budget.amountSpent/budget.Amount})`\r\n            ),\r\n            left: (overBudget\r\n              ? \"unset\"\r\n              : 0\r\n            ),\r\n            right: (overBudget\r\n              ? 0\r\n              : \"unset\"\r\n            ),\r\n          }\r\n        }></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BudgetGraph;\r\n","import {useEffect} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nimport BudgetGraph from './../BudgetGraph';\r\n\r\nimport {getBudgetAmountSpentFromTransactions} from './../../utilities';\r\n\r\nimport {useBudgetCycleTransactions} from './../../hooks';\r\n\r\nimport './index.scss';\r\n\r\nconst BudgetsView = ({ transactions, budgetsData, budgetCycle, setFooterNavbar })=>{\r\n  //Send the route to the footer navbar\r\n  const route = useLocation().pathname;\r\n  useEffect(()=>{\r\n    setFooterNavbar(route);\r\n  }, [route]);\r\n\r\n  const budgetCycleTransactions = useBudgetCycleTransactions(transactions, budgetCycle);\r\n\r\n  return (\r\n    <div className=\"view budgets-view\">\r\n    <h1 className=\"page-title display-3\">Month Overview</h1>\r\n      <div className=\"budget-graphs\">\r\n\r\n        {\r\n          (\r\n            !budgetsData ?\r\n            '' :\r\n            budgetsData.map(budgetData=>\r\n              <BudgetGraph key={budgetData.Name} budget={{...budgetData, color: \"#2196f3\", amountSpent: getBudgetAmountSpentFromTransactions(budgetData.Name, budgetCycleTransactions.all)}}/>\r\n            )\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BudgetsView;\r\n","import {useState} from 'react';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsImportForm = ({ isOpen, onSubmit:onSubmitProp, onFileInputChange:onFileInputChangeProp })=>{\r\n  const [scrapedTransactionsData, setScrapedTransactionsData] = useState(\"\");\r\n\r\n  const onTransactionsImportFormInputChange = event=>{\r\n    const scrapedText = event.target.value;\r\n    setScrapedTransactionsData(scrapedText);\r\n  };\r\n\r\n  const onTransactionsImportFormFileInputChange = async event=>{\r\n    //Prevent default behavior\r\n    event.preventDefault();\r\n\r\n    const transactionsDataFiles = [...event.target.files];\r\n\r\n    //Get the transactions data\r\n    const transactionsDataArray = [];\r\n    await Promise.all(  //Promise.all handles an array of Promises\r\n      transactionsDataFiles.map(async file=>{\r\n        const fileContent = await file.text();\r\n        transactionsDataArray.push(fileContent);\r\n      })\r\n    );\r\n\r\n    //Reset the file input\r\n    event.target.value = \"\";\r\n\r\n    //Call the parent handler\r\n    onFileInputChangeProp(transactionsDataArray);\r\n  };\r\n\r\n  const onSubmit = event=>{\r\n    //Prevent form submission\r\n    event.preventDefault();\r\n\r\n    //Save the current value\r\n    const scrapedTransactionsDataValue = scrapedTransactionsData;\r\n\r\n    //Reset the input\r\n    setScrapedTransactionsData(\"\");\r\n\r\n    //Send it to the parent\r\n    onSubmitProp(scrapedTransactionsDataValue);\r\n  };\r\n\r\n  return (\r\n    !isOpen ?\r\n    null :\r\n    <form className=\"transaction-import-form\" onSubmit={onSubmit}>\r\n      <div>\r\n        <label className=\"form-label\">Transactions</label>\r\n        <div className=\"input-group mb-2\">\r\n          <textarea id=\"transaction-import-input\" className=\"transaction-import-input form-control\" rows=\"1\" onChange={onTransactionsImportFormInputChange}></textarea>\r\n          <button className=\"btn btn-primary input-group-text\" type=\"submit\">Import</button>\r\n        </div>\r\n        <p className=\"form-text\">Paste transactions data for parsing.</p>\r\n        <div>\r\n          <label className=\"form-label\">Or, import a comma-separated values (*.csv) file.</label>\r\n          <input className=\"transaction-import-form-input-file form-control\" type=\"file\" accept=\".csv\" multiple onChange={onTransactionsImportFormFileInputChange} />\r\n        </div>\r\n        <div id=\"transaction-import-form-status\"></div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default TransactionsImportForm;\r\n","// ## FEATUERS\r\n// - InputDropdown list opens when:\r\n//    * clicked anywhere inside of\r\n//    * when the .input-dropdown-input receives input\r\n//    * when the \"Up\" or \"Down\" keys are pressed with the .input-dropdown-input focused\r\n// - InputDropdown list closes when:\r\n//    * a selection is clicked or chosen with the \"Enter\" key\r\n//    * a click occurs outside of the InputDropdown\r\n//    * the InputDropdown loses focus (activates after 100ms, to not conflict with cilck events)\r\n//    * another element is focused on\r\n//    * the \"Esc\" key is pressed\r\n//    * the chevron is clicked while the InputDropdown is open\r\n// - InputDropdown list items can be selected by:\r\n//    * clicking on a list item using\r\n//    * using the \"Up\" and \"Down\" keys along with the \"Enter\" key (when .input-dropdown-input focused)\r\n// - InputDropdown list items can be filtered/highlighted by inputting into .input-dropdown-input\r\n// ## DESIGN\r\n// - .input-dropdown-input takes 100% of InputDropdown width\r\n// - .input-dropdown-list height maxes out and scrolls afterward\r\n// - .input-dropdown-list will scroll as selection moves\r\n// - .input-dropdown-list will only move the selection if the InputDropdown list was already open--if the .input-dropdown-list was opened using the \"Up\" or \"Down\" key, the selection will remain on the current value\r\n// ## OPTIONS\r\n// - setToStartingValueOnInputDropdownClose\r\n// - selectTopListItemOnInputDropdownInputChange\r\n\r\n\r\nimport {useState, useEffect, useRef} from 'react';\r\n\r\nimport {isDescendantOf, matchValueAgainstValue} from './../../utilities';\r\n\r\n//import './InputDropdown.js';\r\nimport './InputDropdown.css';\r\nimport './index.scss';\r\n\r\nconst InputDropdown = (props)=>{\r\n  const { name, value:initialValue=\"\", items:initialItems=[], placeholder, tabIndex, inputDropdownInputRef, className, onSubmit:onSubmitProp } = props;\r\n\r\n  const options = {\r\n    setToStartingValueOnInputDropdownClose: false,\r\n    selectTopListItemOnInputDropdownInputChange: false,\r\n  };\r\n\r\n  const inputDropdownInputListeners = Object.entries(props)\r\n    .filter(([propName, propValue])=>propName.match(\"onInputDropdownInput[A-Z]\"))\r\n    .filter(([propName])=>![\"onInputDropdownInputChange\", \"onInputDropdownInputFocus\"].includes(propName)) //remove listeners that will be attached to component-level listeners\r\n    .map(([propName, propValue])=>{const matches = propName.match(/onInputDropdownInput(\\w+)/);\r\n      return [\r\n        (matches ? `on${matches[1]}` : propName),\r\n        propValue,\r\n      ];\r\n    })\r\n    .reduce((acc, [propName, propValue])=>({\r\n      ...acc,\r\n      [propName]: propValue,\r\n    }), {});\r\n\r\n  const filterListItems = (items, searchFilter)=>{\r\n    if (!searchFilter) return items;\r\n\r\n    //Add .hidden to unmatched items\r\n    return items.filter(item=>matchValueAgainstValue(item, searchFilter));\r\n  };\r\n\r\n  const [value, setValue] = useState(initialValue);\r\n  const [startingValue, setStartingValue] = useState(null);\r\n  const [searchFilter, setSearchFilter] = useState(null)\r\n  const [filteredListItems, setFilteredListItems] = useState(filterListItems(initialItems, searchFilter));\r\n  const [selectedListItem, setSelectedListItem] = useState(null);\r\n  const [isInputDropdownOpen, setIsInputDropdownOpen] = useState(false);\r\n  const [wasInputDropdownOpen, setWasInputDropdownOpen] = useState(false);\r\n\r\n  const inputDropdownListRef = useRef(null);\r\n  const inputDropdownRef = useRef(null);\r\n\r\n  //Declare helper functions\r\n  const isDescendantOfDropdown = element => {\r\n    if (\r\n      !element.classList.contains(\"input-dropdown\") &&\r\n      element.parentElement\r\n    ) return isDescendantOfDropdown(element.parentElement);\r\n\r\n    if (element.classList.contains(\"input-dropdown\")) return element;\r\n\r\n    return false;\r\n  };\r\n\r\n  //Declare functions\r\n  const checkInputDropdownListSelectionScroll = ()=>{\r\n    //If there is no selected item, exit\r\n    if(!selectedListItem) return;\r\n\r\n    //Find the selected list item's DOM node\r\n    const selectedListItemNode = [...inputDropdownListRef.current.querySelectorAll(\".input-dropdown-list-item\")].find(item=>item.innerText === selectedListItem);\r\n\r\n    if (!selectedListItemNode) return;\r\n\r\n    const selectedListItemNodeRect = selectedListItemNode.getBoundingClientRect();\r\n    const inputDropdownListViewport = inputDropdownListRef.current.getBoundingClientRect();\r\n    const topIsBelowNotAboveViewportTop = selectedListItemNodeRect.top >= inputDropdownListViewport.top;\r\n    const bottomIsAboveNotBelowViewportBottom = selectedListItemNodeRect.bottom <= inputDropdownListViewport.bottom;\r\n\r\n    //Shift the view of the dropdown list (via scroll), if necessary\r\n\r\n    //If the top is above the viewport, attempt to scroll the viewport to the top of the selection (or to the bottom scrollable area, if selection is at the bottom)\r\n    if (!topIsBelowNotAboveViewportTop) {\r\n      return inputDropdownListRef.current.scroll({top: inputDropdownListRef.current.scrollTop + (selectedListItemNodeRect.top - inputDropdownListViewport.top)});\r\n    }\r\n\r\n    //Or, if the bottom is below the viewport, scroll the viewport down 1 height unit until we can see the selection bottom\r\n    if (!bottomIsAboveNotBelowViewportBottom) {\r\n      //return inputDropdownListRef.current.scroll({top: inputDropdownListRef.current.scrollTop + (selectedListItemNodeRect.height * (Math.floor((selectedListItemNodeRect.bottom - inputDropdownListViewport.bottom)/selectedListItemNodeRect.height)+1))});\r\n      return inputDropdownListRef.current.scroll({top: inputDropdownListRef.current.scrollTop + (selectedListItemNodeRect.bottom - inputDropdownListViewport.bottom)});\r\n    }\r\n  };\r\n\r\n  const addInputDropdownListItemSelection = (text, selectedListItem)=>{\r\n    if (!selectedListItem) return \"\";\r\n\r\n    //Add .hidden to unmatched items\r\n    return (\r\n      text === selectedListItem ?\r\n      \"selected\" :\r\n      \"\"\r\n    );\r\n  };\r\n\r\n  const getInputDropdownListItemFilteredText = (text, searchFilter)=>{\r\n    //If no value was passed, exit\r\n    if(!searchFilter) return text;\r\n\r\n    const match = matchValueAgainstValue(text, searchFilter);\r\n    if (!match) return text;\r\n    return text.replace(match[1], `<mark class=\"input-dropdown-list-item-highlight\">$&</mark>`);\r\n  };\r\n\r\n  const openInputDropdown = ()=>{\r\n    setIsInputDropdownOpen(previouslyOpen=>{\r\n      setWasInputDropdownOpen(previouslyOpen);\r\n      if (previouslyOpen) return true;\r\n\r\n      //If opening from a closed state, save the starting value\r\n      setStartingValue(value);\r\n\r\n      //Set the selected value to the current value\r\n      setSelectedListItem(value);\r\n\r\n      return true;\r\n    });\r\n  };\r\n\r\n  const closeInputDropdown = ()=>{\r\n    //Reset the search filter\r\n    setSearchFilter(null);\r\n\r\n    //Reset the selected list item\r\n    setSelectedListItem(null);\r\n\r\n    //Close the input dropdown\r\n    setIsInputDropdownOpen(false);\r\n  };\r\n\r\n  const onOutsideClick = ()=>{\r\n    //Reset the value\r\n    if (options.setToStartingValueOnInputDropdownClose) setValue(startingValue);\r\n\r\n    //Close the input dropdown\r\n    closeInputDropdown();\r\n  };\r\n\r\n  //Declare event listeners\r\n  const onInputDropdownInputChange = event=>{\r\n    const newValue = event.target.value;\r\n\r\n    //Update the component's state\r\n    setValue(newValue);\r\n\r\n    //Update the search filter\r\n    setSearchFilter(newValue);\r\n\r\n    //Assure the input dropdown is open\r\n    openInputDropdown();\r\n\r\n    //Call the passed listener, if provided\r\n    if (props.onInputDropdownInputChange) props.onInputDropdownInputChange(event);\r\n  };\r\n\r\n  const onInputDropdownInputFocus = event=>{\r\n    //Assure the input dropdown is open\r\n    openInputDropdown();\r\n\r\n    //Call the passed listener, if provided\r\n    if (props.onInputDropdownInputFocus) props.onInputDropdownInputFocus(event);\r\n  };\r\n\r\n  const onInputDropdownListItemClick = event=>{\r\n    const newValue = event.target.innerText;\r\n\r\n    //Set the value\r\n    setValue(newValue);\r\n\r\n    //Close the input dropdown\r\n    closeInputDropdown();\r\n\r\n    onSubmit({\r\n      ...event,\r\n      isSelectedListItem: true,\r\n    }, newValue);\r\n  };\r\n\r\n  const onInputDropdownListItemMouseMove = event=>{\r\n    const newSelectedListItem = event.target.innerText;\r\n\r\n    //Set the selected list item\r\n    setSelectedListItem(newSelectedListItem);\r\n  };\r\n\r\n  const onInputDropdownListMouseLeave = event=>{\r\n    //Clear the selected list item\r\n    setSelectedListItem(null);\r\n  };\r\n\r\n  const onClick = event=>{\r\n    const newValue = event.target.innerText;\r\n    const inputDropdownInput = event.target.closest(\".input-dropdown-input\");\r\n\r\n    //If the input dropdown was already open,\r\n    // and the click was not on the input,\r\n    // close the input dropdown\r\n    if (isInputDropdownOpen && !inputDropdownInput) return closeInputDropdown();\r\n\r\n    //Otherwise, open the input dropdown\r\n    openInputDropdown();\r\n  };\r\n\r\n  const onKeyDown = event=>{\r\n    //If the user pressed the \"Up\" or \"Down\" arrow,\r\n    //  \"Home\" or \"End\" keys\r\n    if (\r\n      event.keyCode === 38 /* Up */ ||\r\n      event.keyCode === 40 /* Down */ ||\r\n      event.keyCode === 36 /* Home */ ||\r\n      event.keyCode === 35 /* End */\r\n    ) {\r\n      event.preventDefault();\r\n\r\n      //If the user pressed the \"Up\" or \"Down\" arrow,\r\n      // and the input dropdown is not already open, open it\r\n      if (event.keyCode === 38 /* Up */ || event.keyCode === 40 /* Down */) {\r\n        if (!isInputDropdownOpen) return openInputDropdown();\r\n      }\r\n\r\n      //If the input dropdown is already open,\r\n      // select the next or previous dropdown list item\r\n      // based on the key pressed\r\n      let newSelectedListItemIndex;\r\n      if (event.keyCode === 38 /* Up */ || event.keyCode === 40 /* Down */) {\r\n        //If no list item is found for the current value,\r\n        // default to the top (\"Down\") or bottom (\"Up\"),\r\n        // or move one up or down from the current selection\r\n        const upOrDown = (event.keyCode === 38 ? -1 : 1);\r\n        const wrapAround = (event.keyCode === 38 ? filteredListItems.length : -1);\r\n        const selectedListItemIndex = (filteredListItems.indexOf(selectedListItem) === -1 ? wrapAround : filteredListItems.indexOf(selectedListItem));\r\n        newSelectedListItemIndex = (selectedListItemIndex + upOrDown + filteredListItems.length)%filteredListItems.length;\r\n      }\r\n      else if (event.keyCode === 36 /* Home */ || event.keyCode === 35 /* End */) {\r\n        //Select the first or last list item\r\n        newSelectedListItemIndex = (event.keyCode === 36 ? 0 : filteredListItems.length-1);\r\n      }\r\n\r\n      //Move the selection\r\n      const newSelectedListItem = filteredListItems[newSelectedListItemIndex];\r\n      setSelectedListItem(newSelectedListItem);\r\n\r\n      return;\r\n    }\r\n\r\n    //If the user hit the \"Esc\" key\r\n    if (event.keyCode === 27 /* Esc */) {\r\n      event.preventDefault();\r\n\r\n      //Reset the value\r\n      if (options.setToStartingValueOnInputDropdownClose) setValue(startingValue);\r\n\r\n      //Close the input dropdown\r\n      closeInputDropdown();\r\n\r\n      return;\r\n    }\r\n\r\n    //If the user hit the \"Enter\" key\r\n    if (event.keyCode === 13 /* Enter */) {\r\n      event.preventDefault();\r\n\r\n      //Set the value if we selected one\r\n      const newValue = (selectedListItem ? selectedListItem : value);\r\n\r\n      if (selectedListItem) setValue(selectedListItem);\r\n\r\n      //Reset the search filter\r\n      setSearchFilter(null);\r\n\r\n      //Close the input dropdown\r\n      closeInputDropdown();\r\n\r\n      //Act as though a form was submitted with a given value\r\n      onSubmit({\r\n        ...event,\r\n        isSelectedListItem: (selectedListItem ? true : false),\r\n      }, newValue);\r\n\r\n      return;\r\n    }\r\n  };\r\n\r\n  const onBlur = event=>{\r\n    //Close the input dropdown\r\n    window.setTimeout(()=>closeInputDropdown(), 100);\r\n  };\r\n\r\n  const onSubmit = (event, value)=>{\r\n    if (onSubmitProp) onSubmitProp(event, value);\r\n  };\r\n\r\n  //Update the dropdown value whenever a new value or items are passed\r\n  useEffect(()=>setValue(initialValue), [initialValue, initialItems]);\r\n\r\n  //Update the filtered list items whenever the search filter updates\r\n  // and set the selection to the top item\r\n  useEffect(()=>\r\n    setFilteredListItems(()=>{\r\n      //Filter the items\r\n      const newFilteredListItems = filterListItems(initialItems, searchFilter);\r\n\r\n      //Set the selected value to the first option\r\n      if (options.selectTopListItemOnInputDropdownInputChange)\r\n        setSelectedListItem(newFilteredListItems[0]);\r\n      else\r\n        setSelectedListItem(null);\r\n\r\n      return newFilteredListItems;\r\n    })\r\n  , [searchFilter, initialItems]);\r\n\r\n  //While the dropdown is open,\r\n  // when the selected list item changes,\r\n  // check the scroll on the dropdown list\r\n  // to assure the newly selected item is visible\r\n  useEffect(()=>{\r\n    checkInputDropdownListSelectionScroll();\r\n  }, [selectedListItem]);\r\n\r\n  //Add/remove onOutsideClick event listeners\r\n  useEffect(()=>{\r\n    const checkIfClickedOrFocusedOutsideOfDropdown = event=>{\r\n      //If we click outside of the dropdown or its children, close it\r\n      if (!isDescendantOf(event.target, inputDropdownRef.current)) onOutsideClick();\r\n    };\r\n\r\n    const addOnOutsideClick = ()=>{\r\n      document.addEventListener(\"click\", checkIfClickedOrFocusedOutsideOfDropdown);\r\n      document.addEventListener(\"focus\", checkIfClickedOrFocusedOutsideOfDropdown);\r\n    };\r\n\r\n    const removeOnOutsideClick = ()=>{\r\n      document.removeEventListener(\"click\", checkIfClickedOrFocusedOutsideOfDropdown);\r\n      document.removeEventListener(\"focus\", checkIfClickedOrFocusedOutsideOfDropdown);\r\n    };\r\n\r\n    //If closed, or was previously open, do not add the listener\r\n    if (!isInputDropdownOpen) return;\r\n\r\n    //Otherwise, if opening for the first time, add the onOutsideClick listener\r\n    addOnOutsideClick();\r\n\r\n    //Return side effect cleanup\r\n    return ()=>removeOnOutsideClick();\r\n  }, [isInputDropdownOpen, wasInputDropdownOpen]);\r\n\r\n  //useEffect(()=>console.log(`value: ${value}\\r\\nsearchFilter: ${searchFilter}\\r\\nselectedListItem: ${selectedListItem}\\r\\nfilteredListItems`, filteredListItems), [value, searchFilter, selectedListItem, filteredListItems])\r\n\r\n  return (\r\n    <div className={`input-dropdown ${className} ${isInputDropdownOpen ? \"open\" : \"\"}`} onClick={onClick} onKeyDown={onKeyDown} ref={inputDropdownRef} onBlur={onBlur} >\r\n      <input className=\"input-dropdown-input\" name={name} value={value} placeholder={placeholder} tabIndex={tabIndex} ref={inputDropdownInputRef} autoComplete=\"off\" onChange={onInputDropdownInputChange} onFocus={onInputDropdownInputFocus} {...inputDropdownInputListeners}/>\r\n      <div className=\"input-dropdown-chevron-container\">\r\n        <i className=\"input-dropdown-chevron\"></i>\r\n      </div>\r\n      <ul className=\"input-dropdown-list\" ref={inputDropdownListRef} onMouseLeave={onInputDropdownListMouseLeave} >\r\n        {filteredListItems.map(item=>\r\n          <li key={item} className={`input-dropdown-list-item ${addInputDropdownListItemSelection(item, selectedListItem)}`} onClick={onInputDropdownListItemClick} onMouseMove={onInputDropdownListItemMouseMove} dangerouslySetInnerHTML={{__html: getInputDropdownListItemFilteredText(item, searchFilter)}}></li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InputDropdown;\r\n","import {useState, useEffect, useRef} from 'react';\r\n\r\nimport InputDropdown from './../InputDropdown';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsDataSearchForm = ({ budgetCycleTransactions, transactionProperties, searchFilters, onSubmit:onSubmitProp, onFilterClick:onFilterClickProp })=>{\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isSearchSuggestionsOpen, setIsSearchSuggestionsOpen] = useState(false);\r\n  const [activeSearchSuggestion, setActiveSearchSuggestion] = useState(null);\r\n\r\n  const transactionsDataSearchFormInput = useRef(null);\r\n\r\n  const getUniqueTransactionsPropertiesValues = (budgetCycleTransactions, property)=>{\r\n    return [\r\n      ...new Set(\r\n        budgetCycleTransactions.map(t=>{\r\n          const value = t[property];\r\n          return (value instanceof Date ? value.toJSON() : value)\r\n        })\r\n        .filter(t=>(Array.isArray(t) ? t.length : t))\r\n      )\r\n    ]\r\n      .sort((a,b)=>a<b ? -1 : b<a ? 1 : 0);\r\n  };\r\n\r\n  const getSearchSuggestions = ()=>{\r\n    const escapedSearch = (\r\n      search ?\r\n      search.replace(/([-\\/\\\\^$*+?.()|[\\]{}])/g, '\\\\$1') :\r\n      \"\"\r\n    );\r\n\r\n    if (!activeSearchSuggestion) return transactionProperties.filter(p=>p.match(new RegExp(\"^\"+escapedSearch, \"i\")));\r\n\r\n    return getUniqueTransactionsPropertiesValues(budgetCycleTransactions.all, activeSearchSuggestion);\r\n  };\r\n\r\n  const onTransactionsDataSearchFormActiveSearchSuggestionClick = event=>{\r\n    setActiveSearchSuggestion(null);\r\n    setSearch(\"\");\r\n  };\r\n\r\n  const onTransactionsDataSearchFormInputDropdownKeyDown = event=>{\r\n    if(activeSearchSuggestion && event.target.value === \"\" && event.keyCode === 8 /* Backspace */) {\r\n      setActiveSearchSuggestion(null);\r\n      setSearch(\"\");\r\n      return;\r\n    }\r\n  };\r\n\r\n  const onTransactionsDataSearchFormInputDropdownSubmit = (event, newSearch)=>{\r\n    //If an active search filter has not yet been applied,\r\n    // and a list item was selected, apply a search filter\r\n    if (!activeSearchSuggestion && event.isSelectedListItem) {\r\n      setActiveSearchSuggestion(newSearch);\r\n      setSearch(\"\"); //set to \"\" so it will propagate down to InputDropdown\r\n      transactionsDataSearchFormInput.current.focus();\r\n      return;\r\n    }\r\n\r\n    //Otherwise, set the new search value\r\n    transactionsDataSearchFormInput.current.focus();\r\n    onSubmit(newSearch);\r\n  };\r\n\r\n  const onSubmit = searchValue=>{\r\n    //Reset the search value\r\n    setSearch(\"\");\r\n\r\n    //Reset the active search suggestion\r\n    setActiveSearchSuggestion(null);\r\n\r\n    const searchObject = {\r\n      key: activeSearchSuggestion,\r\n      value: searchValue,\r\n    };\r\n\r\n    //Send the search value to the parent\r\n    onSubmitProp(searchObject);\r\n  };\r\n\r\n  const onFilterClick = removedSearchFilter=>{\r\n    onFilterClickProp(removedSearchFilter);\r\n  };\r\n\r\n  return (\r\n    <form className=\"transactions-data-search-form\" onSubmit={onSubmit}>\r\n      <div className=\"transactions-data-search-form-input-container\">\r\n        <i className=\"transactions-data-search-form-icon fas fa-search\"></i>\r\n        {\r\n          activeSearchSuggestion ?\r\n          (\r\n            <span className=\"transactions-data-search-form-active-search-suggestion badge rounded-pill\" onClick={onTransactionsDataSearchFormActiveSearchSuggestionClick}>\r\n              <i className=\"transactions-data-search-form-active-search-suggestion-x fas fa-xs fa-times me-1\"></i>\r\n              {activeSearchSuggestion}\r\n            </span>\r\n          ) :\r\n          null\r\n        }\r\n        <InputDropdown className=\"transactions-data-search-form-input\" value={search} items={getSearchSuggestions()} placeholder=\"Search...\" inputDropdownInputRef={transactionsDataSearchFormInput} onSubmit={onTransactionsDataSearchFormInputDropdownSubmit} onInputDropdownInputKeyDown={onTransactionsDataSearchFormInputDropdownKeyDown} />\r\n      </div>\r\n      <div className=\"transactions-data-search-form-search-filters\">\r\n        {searchFilters.map(({key:searchKey, value:searchValue}, i)=>(\r\n          <span key={i} className=\"transactions-data-search-form-search-filter badge rounded-pill bg-secondary\" onClick={event=>onFilterClick(searchValue)}><i className=\"transactions-data-search-form-filter-x fas fa-xs fa-times me-1\"></i>{searchKey ? `${searchKey}:` : \"\"}{searchValue}</span>\r\n        ))}\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default TransactionsDataSearchForm;\r\n","import './index.scss';\r\n\r\nconst TransactionRowDateSeparator = ({ date, count })=>{\r\n  const getMonthString = monthIndex=>{\r\n    if (monthIndex === 0) return \"January\";\r\n    if (monthIndex === 1) return \"February\";\r\n    if (monthIndex === 2) return \"March\";\r\n    if (monthIndex === 3) return \"April\";\r\n    if (monthIndex === 4) return \"May\";\r\n    if (monthIndex === 5) return \"June\";\r\n    if (monthIndex === 6) return \"July\";\r\n    if (monthIndex === 7) return \"August\";\r\n    if (monthIndex === 8) return \"September\";\r\n    if (monthIndex === 9) return \"October\";\r\n    if (monthIndex === 10) return \"November\";\r\n    if (monthIndex === 11) return \"December\";\r\n    return null\r\n  };\r\n\r\n  const convertDateToDateHeaderString = date=>{\r\n    return `${getMonthString(date.getMonth())} ${date.getDate()}, ${date.getFullYear()}`;\r\n  };\r\n\r\n  return (\r\n    <div key={date.getTime()} className=\"transaction-row-date-separator d-flex justify-content-between p-1 px-3\">\r\n      <div>{convertDateToDateHeaderString(date)}</div>\r\n      <div>({count})</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionRowDateSeparator;\r\n","import {useState, useEffect, useRef} from 'react';\r\n\r\nimport {isDescendantOf, getTransactionDefaultDescriptionDisplay, formatTransactionDisplay} from './../../utilities';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionRow = ({ transaction, onTransactionEditButtonClick:onTransactionEditButtonClickProp, onTransactionDeleteButtonClick:onTransactionDeleteButtonClickProp })=>{\r\n  const [startingX, setStartingX] = useState(0);\r\n  const [startingTouch, setstartingTouch] = useState({});\r\n  const [translateX, setTranslateX] = useState(0);\r\n  const [stickyX, setStickyX] = useState(0);\r\n  const [isBeingDragged, setIsBeingDragged] = useState(false);\r\n  const [isFirstDrag, setIsFirstDrag] = useState(false);\r\n  const [isScrollingNotDragging, setIsScrollingNotDragging] = useState(false);\r\n\r\n  const maxNecessaryDragX = -84; //px, how far over the user must drag to activate the delete button\r\n  const minAllowableDragX = null; //px, how far the user can drag to the left\r\n  const maxAllowableDragX = 0; //px, how far the user can drag to the right\r\n\r\n  const isDragFeatureActive = ()=>(stickyX !== 0);\r\n\r\n  const [transactionDisplay, setTransactionDisplay] = useState({\r\n    PostedDate: \"\",\r\n    TransactionDate: \"\",\r\n    AccountNumber: \"\",\r\n    Type: \"\",\r\n    Description: \"\",\r\n    Amount: \"\",\r\n    Category: \"\",\r\n    Notes: \"\",\r\n    Tags: [],\r\n  });\r\n\r\n  useEffect(()=>{\r\n    const formattedTransactionDisplay = formatTransactionDisplay(transaction);\r\n    setTransactionDisplay({\r\n      ...formattedTransactionDisplay,\r\n      Description: getTransactionDefaultDescriptionDisplay(transaction),\r\n      AccountNumber: formattedTransactionDisplay.AccountNumber || \"*----\",\r\n      Category: formattedTransactionDisplay.Category || \"[uncategorized]\"\r\n    })\r\n  }, [transaction]);\r\n\r\n  const onTransactionEditButtonClick = event=>{\r\n    if (isDragFeatureActive()) return;\r\n    onTransactionEditButtonClickProp(transaction);\r\n  };\r\n\r\n  const onTransactionDeleteButtonClick = event=>{\r\n    onTransactionDeleteButtonClickProp(transaction);\r\n  };\r\n\r\n  //Once the user drags over the necessary distance,\r\n  // set the sticky position\r\n  useEffect(()=>{\r\n\r\n  }, [translateX]);\r\n\r\n  const onTouchStart = event=>{\r\n    //Set where the touch starts\r\n    const touch = event.touches[0];\r\n    setstartingTouch(touch);\r\n\r\n    //Mark that the target is being dragged,\r\n    // so the smooth snapback can be deactivated\r\n    setIsBeingDragged(true);\r\n\r\n    //Also mark that this is the very first drag,\r\n    // so we can calculate whether to scroll or not\r\n    // based on the direction of the drag\r\n    setIsFirstDrag(true);\r\n  };\r\n\r\n  const onTouchMove = event=>{\r\n    //As the touch moves, calculate the drag distance,\r\n    // and set target's translateX to the drag distance,\r\n    // beginning at the target's start position\r\n    const touch = event.touches[0];\r\n    const dragDistanceX = touch.clientX - startingTouch.clientX;\r\n    const dragDistanceY = touch.clientY - startingTouch.clientY;\r\n    const potentialNewTranslateX = startingX + dragDistanceX;\r\n\r\n    //Check whether the target needs to be dragged, or\r\n    // if the drag was too vertical (i.e. a scroll attempt)\r\n    if (isFirstDrag) {\r\n      //Reset the first drag mark\r\n      setIsFirstDrag(false);\r\n\r\n      //If the scroll was too vertical, assume the user\r\n      // was scrolling, not dragging,\r\n      // set the isScrolling mark, and prematurely return\r\n      // from this listener\r\n      if (Math.abs(dragDistanceY) > Math.abs(dragDistanceX)) return setIsScrollingNotDragging(true);\r\n    }\r\n\r\n    //If the user is scrolling, don't drag\r\n    if (isScrollingNotDragging) return;\r\n\r\n    //Continue with the drag logic\r\n    event.preventDefault();\r\n\r\n    //Check that it is within the allowable drag bounds,\r\n    // and adjust accordingly if not\r\n    //And if we over-drag (drag past the max necessary position),\r\n    // decrease the drag\r\n    const newTranslateX = ((!!minAllowableDragX || minAllowableDragX === 0) && potentialNewTranslateX < minAllowableDragX ? minAllowableDragX : ((!!maxAllowableDragX || maxAllowableDragX === 0) && potentialNewTranslateX > maxAllowableDragX ? maxAllowableDragX : (\r\n      potentialNewTranslateX < maxNecessaryDragX ?\r\n      maxNecessaryDragX - ((maxNecessaryDragX - dragDistanceX)/5) :\r\n      potentialNewTranslateX\r\n    )));\r\n\r\n    setTranslateX(newTranslateX);\r\n  };\r\n\r\n  const onTouchEnd = event=>{\r\n    const newStickyX = (translateX <= maxNecessaryDragX ? maxNecessaryDragX : 0);\r\n\r\n    //Set the sticky position to either the \"open\" position,\r\n    // or back to 0, depending on where the drag ended\r\n    setStickyXWrapper(newStickyX);\r\n\r\n    //Assure the first drag mark is reset\r\n    setIsFirstDrag(false);\r\n\r\n    //Reset whether the user is scrolling or dragging\r\n    setIsScrollingNotDragging(false);\r\n  };\r\n\r\n  const endDragFeature = ()=>{\r\n    setStickyXWrapper(0);\r\n  };\r\n\r\n  const setStickyXWrapper = stickyX=>{\r\n    setStickyX(()=>{\r\n      //Reset the target's starting position, and\r\n      // the translated position, to the sticky position\r\n      setTranslateX(stickyX);\r\n      setStartingX(stickyX);\r\n\r\n      //Mark that the target is not being dragged,\r\n      // so the smooth snapback can be activated\r\n      setIsBeingDragged(false);\r\n\r\n      return stickyX;\r\n    });\r\n  };\r\n\r\n  //Save the component DOM node for reference\r\n  const transactionRow = useRef(null);\r\n\r\n  //Create an event listener to check if the user\r\n  // touches outside the dragged target\r\n  const onOutsideTouchStart = event=>{\r\n    if (isDescendantOf(event.target, transactionRow.current)) return;\r\n    if (isDragFeatureActive()) {\r\n      event.preventDefault();\r\n      endDragFeature();\r\n    }\r\n  };\r\n\r\n  //Remove & add the outside touch event listener on each render\r\n  useEffect(()=>{\r\n    document.addEventListener(\"touchstart\", onOutsideTouchStart, {passive: false});\r\n    if (transactionRow.current) transactionRow.current.addEventListener(\"touchmove\", onTouchMove);\r\n    return ()=>{\r\n      document.removeEventListener(\"touchstart\", onOutsideTouchStart);\r\n      if (transactionRow.current) transactionRow.current.removeEventListener(\"touchmove\", onTouchMove);\r\n    };\r\n  }, [transactionRow, onTouchMove, onOutsideTouchStart]);\r\n\r\n  return (\r\n    <div className={`transaction-row ${(!isBeingDragged ? \"released\" : '')}`} style={{transform: `translateX(${translateX}px)`}} onTouchStart={onTouchStart} /* onTouchMove={onTouchMove} //moved to useEffect() for {passive: false} (made default by Chrome) */ onTouchEnd={onTouchEnd} ref={transactionRow} >\r\n      <div className=\"transaction-row-container\" onClick={onTransactionEditButtonClick} >\r\n        <div className=\"transaction-row-description-container\">\r\n          <span className={`transaction-row-description ${(!transaction.DescriptionDisplay ? \"uncategorized\" : \"\")}`}>{transactionDisplay.Description}</span>\r\n          <span className={`transaction-row-amount${transaction.Amount >= 0 ? \" positive\" : \"\"}`}>{transactionDisplay.Amount}</span>\r\n        </div>\r\n        <div className=\"transaction-row-subdescription-container\">\r\n          <span className=\"transaction-row-account\">{transactionDisplay.AccountNumber}</span>\r\n          &nbsp;|&nbsp;\r\n          <span className=\"transaction-row-category\">{transactionDisplay.Category}</span>\r\n        </div>\r\n      </div>\r\n      <button className={\"transaction-row-delete-button\"} onClick={onTransactionDeleteButtonClick}>\r\n        <span className=\"transaction-row-delete-button-text\">Delete</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionRow;\r\n","import {useState, useEffect} from 'react';\r\n\r\nimport TransactionsDataSearchForm from './../TransactionsDataSearchForm';\r\nimport TransactionRowDateSeparator from './../TransactionRowDateSeparator';\r\nimport TransactionRow from './../TransactionRow';\r\n\r\nimport {convertNumberToCurrency, getTransactionsAmountTotal, matchValueAgainstValue} from './../../utilities';\r\nimport {useConsoleLog} from './../../hooks';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsDataRows = ({ filteredBudgetCycleTransactions, heading, searchFilters, onTransactionEditButtonClick, onTransactionDeleteButtonClick })=>{\r\n  //Temporary variable used to render date headings\r\n  let currentDateRendered;\r\n\r\n  return (\r\n    <div className=\"transaction-rows\">\r\n      {searchFilters.length ? null : (\r\n        <div className=\"transaction-rows-heading-container d-flex justify-content-between align-items-end mb-2\">\r\n          <h2 className=\"transaction-rows-heading mb-0\">{heading}</h2>\r\n          <div className=\"fw-bold\">\r\n            <span className=\"transaction-rows-heading-count\">{convertNumberToCurrency(getTransactionsAmountTotal(filteredBudgetCycleTransactions))}</span>\r\n            &nbsp;\r\n            <span className=\"transaction-rows-heading-count me-3\">({filteredBudgetCycleTransactions.length})</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {filteredBudgetCycleTransactions\r\n      //Sort remaining transactions\r\n      .sort((a,b)=>b.TransactionDate-a.TransactionDate)\r\n      //Add in the date separators\r\n      .reduce((transactions, transaction)=>{\r\n        if ((currentDateRendered ? currentDateRendered.Date.toJSON() : false) !== transaction.TransactionDate.toJSON()) {\r\n          const dateHeaderObject = {\r\n            Date: transaction.TransactionDate,\r\n            Count: 1,\r\n          };\r\n          transactions.push(dateHeaderObject);\r\n          currentDateRendered = dateHeaderObject;\r\n        }\r\n        else {\r\n          currentDateRendered.Count++;\r\n        }\r\n        return transactions.concat(transaction);\r\n      }, [])\r\n      .map((transaction, i)=>(\r\n        transaction.Date && transaction.Count ?\r\n        <TransactionRowDateSeparator key={i} date={transaction.Date} count={transaction.Count} /> :\r\n        <TransactionRow key={i} transaction={transaction} onTransactionEditButtonClick={onTransactionEditButtonClick} onTransactionDeleteButtonClick={onTransactionDeleteButtonClick} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TransactionsData = ({ budgetCycleTransactions, onTransactionEditButtonClick, onTransactionDeleteButtonClick })=>{\r\n  const defaultTransactionProperty = \"DescriptionDisplay\";\r\n\r\n  const filterTransactionsBySearchFilters = (budgetCycleTransactions, searchFilters)=>{\r\n    const filterBudgetCycleTransactions = budgetCycleTransactions=>{\r\n      return budgetCycleTransactions\r\n        .filter(t=>\r\n          searchFilters.map(({key:searchKey, value:searchValue})=>{\r\n            const value = t[searchKey ?? defaultTransactionProperty];\r\n            if (!value && !(searchKey === \"Category\" && searchValue === \"Miscellaneous\")) return false;\r\n\r\n            if (searchKey === \"Category\" && searchValue === \"Miscellaneous\") return value === null || value.match(new RegExp(searchValue, \"i\"));\r\n            return matchValueAgainstValue(value, searchValue);\r\n          })\r\n          .every(i=>i)\r\n        );\r\n    };\r\n\r\n    //Filter transactions (or render them all) based on current search filters\r\n    const newlyFilteredBudgetCycleTransactions = {\r\n      ...budgetCycleTransactions,\r\n      income: filterBudgetCycleTransactions(budgetCycleTransactions.income),\r\n      expenses: filterBudgetCycleTransactions(budgetCycleTransactions.expenses),\r\n    };\r\n    Object.defineProperty(newlyFilteredBudgetCycleTransactions, \"all\", Object.getOwnPropertyDescriptor(budgetCycleTransactions, \"all\"));\r\n    return newlyFilteredBudgetCycleTransactions;\r\n  };\r\n\r\n  const [searchFilters, setSearchFilters] = useState([]);\r\n  const [filteredBudgetCycleTransactions, setFilteredBudgetCycleTransactions] = useState(filterTransactionsBySearchFilters(budgetCycleTransactions, searchFilters));\r\n\r\n  const filteredRemainingTotal = convertNumberToCurrency(getTransactionsAmountTotal(filteredBudgetCycleTransactions.all));\r\n  const transactionProperties = (filteredBudgetCycleTransactions.all?.length ? Object.keys(filteredBudgetCycleTransactions.all[0]).filter(property=>![\"DateCreated\",\"DateModified\",\"IsAutoCategorized\",\"IsUpdatedByUser\"].includes(property)) : []);\r\n\r\n  const onTransactionsDataSearchFormSubmit = searchObject=>{\r\n    setSearchFilters(previousSearchFilters=>[...previousSearchFilters, searchObject]);\r\n  };\r\n\r\n  const onFilterClick = removedSearchFilter=>{\r\n    setSearchFilters(previousSearchFilters=>{\r\n      const newSearchFilters = [...previousSearchFilters];\r\n      return newSearchFilters.splice(newSearchFilters.indexOf(removedSearchFilter),1) && newSearchFilters;\r\n    });\r\n  };\r\n\r\n  //Keep filtered transactions updated\r\n  useEffect(()=>\r\n    setFilteredBudgetCycleTransactions(filterTransactionsBySearchFilters(budgetCycleTransactions, searchFilters))\r\n  , [budgetCycleTransactions, searchFilters]);\r\n\r\n  useConsoleLog(filteredBudgetCycleTransactions, \"filteredBudgetCycleTransactions\");\r\n\r\n  return (\r\n    <div className=\"transactions-data\">\r\n      <TransactionsDataSearchForm budgetCycleTransactions={budgetCycleTransactions} transactionProperties={transactionProperties} searchFilters={searchFilters} onSubmit={onTransactionsDataSearchFormSubmit} onFilterClick={onFilterClick} />\r\n      {\r\n        searchFilters.length ?\r\n        <TransactionsDataRows filteredBudgetCycleTransactions={filteredBudgetCycleTransactions.all} searchFilters={searchFilters} onTransactionEditButtonClick={onTransactionEditButtonClick} onTransactionDeleteButtonClick={onTransactionDeleteButtonClick}/> :\r\n        <>\r\n          <TransactionsDataRows filteredBudgetCycleTransactions={filteredBudgetCycleTransactions.income} heading=\"Income\" searchFilters={searchFilters} onTransactionEditButtonClick={onTransactionEditButtonClick} onTransactionDeleteButtonClick={onTransactionDeleteButtonClick}/>\r\n          <TransactionsDataRows filteredBudgetCycleTransactions={filteredBudgetCycleTransactions.expenses} heading=\"Expenses\" searchFilters={searchFilters} onTransactionEditButtonClick={onTransactionEditButtonClick} onTransactionDeleteButtonClick={onTransactionDeleteButtonClick}/>\r\n        </>\r\n      }\r\n      <div className=\"transactions-information d-flex justify-content-between mb-4 mr-2\">\r\n        <span className=\"transactions-count\">{(filteredBudgetCycleTransactions.all.length ? filteredBudgetCycleTransactions.all.length : 0)} transactions</span>\r\n        <div>\r\n          <div className=\"transactions-total\">{filteredRemainingTotal} total</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsData;\r\n","import './index.scss';\r\n\r\nconst TagBadge = ({ tag, onClick })=>{\r\n  return (\r\n    <span key={tag} className=\"tag-badge badge rounded-pill\" onClick={onClick}>{tag}</span>\r\n  );\r\n};\r\n\r\nexport default TagBadge;\r\n","import TagBadge from './../TagBadge';\r\nimport InputDropdown from './../InputDropdown';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionDetailModalInput = ({ transactionDetail, tabIndex, onChange, onKeyPress, onTagBadgeClick })=>{\r\n  return (\r\n    <div>\r\n      {(\r\n        transactionDetail.name === \"Tags\" ?\r\n        (\r\n          <div className=\"transaction-detail-modal-input-tags-container form-control\">\r\n            <input className=\"transaction-detail-modal-input-tags-hidden form-control\" type=\"hidden\" name=\"Tags\" value={transactionDetail.value.join(\",\")} />\r\n            <div className=\"transaction-detail-modal-input-tags-badge-container\">\r\n              {transactionDetail.value.map(tag=><TagBadge key={tag} tag={tag} onClick={event=>onTagBadgeClick(tag)} />)}\r\n            </div>\r\n            <transactionDetail.tag className=\"transaction-detail-modal-input transaction-detail-modal-input-tags form-control\" type={transactionDetail.tagType} placeholder={transactionDetail.placeholder} tabIndex={tabIndex} onKeyPress={onKeyPress}></transactionDetail.tag>\r\n          </div>\r\n        ) : (\r\n        [\"Category\", \"Type\", \"BudgetCycle\"].includes(transactionDetail.name) ?\r\n          <InputDropdown name={transactionDetail.name} value={transactionDetail.value} items={transactionDetail.items} placeholder={transactionDetail.placeholder} {...(transactionDetail.disabled && {disabled: true})} tabIndex={tabIndex} onInputDropdownInputChange={onChange} onInputDropdownInputKeyPress={onKeyPress}/>\r\n        :\r\n          <transactionDetail.tag className=\"transaction-detail-modal-input transaction-detail-modal-input-text form-control\" name={transactionDetail.name} value={transactionDetail.value} type={transactionDetail.tagType} placeholder={transactionDetail.placeholder} tabIndex={tabIndex} {...(transactionDetail.disabled && {disabled: true})} onChange={onChange} onKeyPress={onKeyPress}>{transactionDetail.tag !== \"input\" ? transactionDetail.value : null}</transactionDetail.tag>\r\n      )\r\n    )}\r\n    </div> //disabled inputs don't fire events; wrap in something that will fire an event\r\n  );\r\n};\r\n\r\nexport default TransactionDetailModalInput;\r\n","import {useState, useEffect} from 'react';\r\n\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport TransactionDetailModalInput from './../TransactionDetailModalInput';\r\n\r\nimport {nullCoalesce, formatTransactionDisplay, getBudgetCycleString, getBudgetCycleFromBudgetCycleString} from './../../utilities';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionDetailModal = ({ transaction, allBudgetCycles, categories, types, buttonsOptions, isOpen, onClose, onSubmit })=>{\r\n  const [BudgetCycle, setBudgetCycle] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [PostedDate, setPostedDate] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [TransactionDate, setTransactionDate] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [AccountNumber, setAccountNumber] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [Amount, setAmount] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [Description, setDescription] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [DescriptionDisplay, setDescriptionDisplay] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [Category, setCategory] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [Type, setType] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [Notes, setNotes] = useState(\"\"); //empty string, as initial value for input[type=\"text\"]\r\n  const [Tags, setTags] = useState([]);\r\n\r\n  const transactionDetails = [\r\n    {name: \"BudgetCycle\", placeholder: \"Select a budget cycle\", value: BudgetCycle, items: allBudgetCycles.map(b=>getBudgetCycleString(b)), tag: \"input\", tagType: \"text\", setState: setBudgetCycle, disabled: false},\r\n    {name: \"PostedDate\", placeholder: \"Posted Date\", value: PostedDate, tag: \"input\", tagType: \"text\", setState: setPostedDate, disabled: false},\r\n    {name: \"TransactionDate\", placeholder: \"Transaction Date\", value: TransactionDate, tag: \"input\", tagType: \"text\", setState: setTransactionDate, disabled: false},\r\n    {name: \"AccountNumber\", placeholder: \"Account Number\", value: AccountNumber, tag: \"input\", tagType: \"text\", setState: setAccountNumber, disabled: false},\r\n    {name: \"Amount\", placeholder: \"Amount\", value: Amount, tag: \"input\", tagType: \"text\", setState: setAmount, disabled: false},\r\n    {name: \"Description\", placeholder: \"Description\", value: Description, tag: \"input\", tagType: \"text\", setState: setDescription, disabled: true},\r\n    {name: \"DescriptionDisplay\", placeholder: \"Description\", value: DescriptionDisplay, tag: \"input\", tagType: \"text\", setState: setDescriptionDisplay, disabled: false},\r\n    {name: \"Category\", placeholder: \"Select a category...\", value: Category, items: categories, tag: \"input\", tagType: \"text\", setState: setCategory, disabled: false},\r\n    {name: \"Type\", placeholder: \"Select a type...\", value: Type, items: types, tag: \"input\", tagType: \"text\", setState: setType, disabled: false},\r\n    {name: \"Notes\", placeholder: \"Notes\", value: Notes, tag: \"textarea\", tagType: null, setState: setNotes, disabled: false},\r\n    {name: \"Tags\", placeholder: \"Tags\", value: Tags, tag: \"input\", tagType: \"text\", setState: setTags, disabled: false},\r\n  ];\r\n\r\n  //When the transaction changes,\r\n  // or the modal is opened or closed,\r\n  // reset the state\r\n  useEffect(()=>{\r\n    if(!transaction) return;\r\n\r\n    const transactionDisplay = formatTransactionDisplay(transaction);\r\n    setBudgetCycle(transactionDisplay.BudgetCycle);\r\n    setPostedDate(transactionDisplay.PostedDate);\r\n    setTransactionDate(transactionDisplay.TransactionDate);\r\n    setAccountNumber(transactionDisplay.AccountNumber);\r\n    setAmount(transactionDisplay.Amount);\r\n    setDescription(transactionDisplay.Description);\r\n    setDescriptionDisplay(transactionDisplay.DescriptionDisplay);\r\n    setCategory(transactionDisplay.Category);\r\n    setNotes(transactionDisplay.Notes);\r\n    setType(transactionDisplay.Type);\r\n    setTags(transactionDisplay.Tags);\r\n    console.log(\"Updating TransactionDetailModal state based on updated prop \\\"transaction\\\".\", transaction, PostedDate, TransactionDate, AccountNumber, Amount, Description, Category, Notes, Type, Tags)\r\n  }, [transaction, isOpen]);\r\n\r\n  const onTransactionDetailInputChange = (event, transactionDetail)=>{\r\n    const newValue = event.target.value;\r\n    transactionDetail.setState(newValue);\r\n  };\r\n\r\n  const onTransactionDetailInputKeyPress = event=>{\r\n    const transactionDetailInput = event.target;\r\n\r\n    //If the \"Enter\" key is pressed on input[name=\"Tags\"],\r\n    // append the newly added tag\r\n    if (event.key === \"Enter\") {\r\n      if (transactionDetailInput.classList.contains(\"transaction-detail-modal-input-tags\")) {\r\n        event.preventDefault();\r\n\r\n        const newValue = transactionDetailInput.value;\r\n\r\n        //Add the additional tag\r\n        setTags([...Tags, transactionDetailInput.value]);\r\n\r\n        //Reset the input\r\n        transactionDetailInput.value = '';\r\n\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  const transactionModalFormOnSubmit = event=>{\r\n    const transactionModalForm = event.target;\r\n    const formattedTransaction = formatTransactionDisplay(transaction);\r\n\r\n    //Prevent the form from submitting\r\n    event.preventDefault();\r\n\r\n    //Aggregate the form data into an object,\r\n    // and add that the transaction has been\r\n    // updated by the user\r\n    const data = [...transactionModalForm.querySelectorAll(\"[name]\")].reduce((accumulator,{name, value})=>{\r\n      //If the value has not changed, return\r\n      if (value === formattedTransaction[name]) return accumulator;\r\n\r\n      //Vaildate the value\r\n      value = (name === \"Tags\" ? (value ? value.split(/\\s*,\\s*/) : []) : value); //Tags validation\r\n      value = (name === \"BudgetCycle\" ? (value ? getBudgetCycleFromBudgetCycleString(value) : null) : value); //BudgetCycle validation\r\n      value = (value instanceof Array && value.length === 0 ? [] : nullCoalesce(value)) //Array validation\r\n\r\n      return {\r\n        ...accumulator,\r\n        [name]: value,\r\n      };\r\n    }, {\r\n      IsUpdatedByUser: true,\r\n      DateModified: new Date(),\r\n    });\r\n    console.log(\"Data submitted from TransactionDetailModal\", data);\r\n\r\n    //Update the transaction with the new form data\r\n    const updatedTransaction = {\r\n      ...transaction, //previous transaction data\r\n      ...data, //new transaction data from the form\r\n      Description: transaction.Description, //make sure to never change the actual Description\r\n    };\r\n\r\n    console.log(\"Updated transaction submitted from TransactionDetailModal\", updatedTransaction);\r\n\r\n    onSubmit(updatedTransaction);\r\n  };\r\n\r\n  const onTagBadgeClick = tag=>{\r\n    setTags(Tags.filter(t=>t!==tag));\r\n  };\r\n\r\n  return (\r\n    <Modal id=\"transaction-detail-modal\" show={isOpen} onHide={onClose}>\r\n      <Modal.Header>\r\n        <Modal.Title className=\"modal-title\">Transaction Detail</Modal.Title>\r\n        <button className=\"btn-close\" type=\"button\" onClick={onClose}></button>\r\n      </Modal.Header>\r\n      <form className=\"transaction-detail-modal-form\" onSubmit={transactionModalFormOnSubmit}>\r\n        <Modal.Body>\r\n          {transactionDetails.map((transactionDetail, i)=>(\r\n            <TransactionDetailModalInput key={transactionDetail.name} transactionDetail={transactionDetail} tabIndex={i+1} onChange={(event)=>onTransactionDetailInputChange(event, transactionDetail)} onKeyPress={onTransactionDetailInputKeyPress} onTagBadgeClick={onTagBadgeClick} />\r\n          ))}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <button className=\"btn btn-secondary\" type=\"button\" tabIndex={transactionDetails.length+1} onClick={onClose}>Cancel</button>\r\n          <button className=\"btn btn-primary\" type=\"submit\" tabIndex={transactionDetails.length+2}>Save</button>\r\n        </Modal.Footer>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default TransactionDetailModal;\r\n","import Modal from 'react-bootstrap/Modal';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionDetailModal = ({ transaction, isOpen, onClose, onSubmit:onSubmitProp })=>{\r\n  const onSubmit = event=>{\r\n    event.preventDefault();\r\n\r\n    onSubmitProp(transaction);\r\n  };\r\n\r\n  return (\r\n    <Modal id=\"transaction-modal\" show={isOpen} onHide={onClose}>\r\n      <Modal.Header>\r\n        <Modal.Title className=\"modal-title\">Delete Transaction</Modal.Title>\r\n        <button className=\"btn-close\" type=\"button\" onClick={onClose}></button>\r\n      </Modal.Header>\r\n      <form className=\"transaction-modal-form\" onSubmit={onSubmit}>\r\n        <Modal.Body>\r\n          <p class=\"text-center\">Are you sure?</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <button className=\"btn btn-secondary\" type=\"button\" tabIndex=\"1\" onClick={onClose}>Cancel</button>\r\n          <button className=\"btn btn-primary\" type=\"submit\" tabIndex=\"2\">Delete</button>\r\n        </Modal.Footer>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default TransactionDetailModal;\r\n","import {convertNumberToCurrency} from './../../utilities';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsImportDuplicatesModalDuplicateCheckbox = ({ id, duplicateData, onChange:onChangeProp })=>{\r\n  const onChange = event=>{\r\n    //Update the duplicate's confirmation state in the parent\r\n    const updatedDuplicateData = {\r\n      ...duplicateData,\r\n      confirmed: !duplicateData.confirmed,\r\n    };\r\n\r\n    onChangeProp(duplicateData, updatedDuplicateData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"form-check\">\r\n      <input className=\"form-check-input\" type=\"checkbox\" id={id} checked={duplicateData.confirmed} onChange={onChange}/>\r\n      <label className=\"form-check-label\" htmlFor={id}>\r\n        {`${(duplicateData.duplicate.TransactionDate).toLocaleDateString()} ${convertNumberToCurrency(duplicateData.duplicate.Amount)} ${duplicateData.duplicate.Description}`}\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsImportDuplicatesModalDuplicateCheckbox;\r\n","import {useState, useEffect} from 'react';\r\n\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport TransactionsImportDuplicatesModalDuplicateCheckbox from './../TransactionsImportDuplicatesModalDuplicateCheckbox';\r\nimport {isTransactionDuplicate} from './../../utilities';\r\nimport {useConsoleLog} from './../../hooks';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsImportDuplicatesModal = ({ newTransactions, duplicates, isOpen, onClose, onSubmit:onSubmitProp })=>{\r\n  const getDuplicatesDataFromDuplicates = duplicates=>{\r\n    return duplicates.map(duplicate=>({duplicate, confirmed: true}))\r\n  };\r\n\r\n  const [duplicatesData, setDuplicatesData] = useState(getDuplicatesDataFromDuplicates(duplicates));\r\n\r\n  useEffect(()=>\r\n    setDuplicatesData(getDuplicatesDataFromDuplicates(duplicates))\r\n  , [duplicates]);\r\n\r\n  useConsoleLog(duplicatesData, \"Duplicates data: \");\r\n\r\n  const onSubmit = event=>{\r\n    //Prevent the form from submitting\r\n    event.preventDefault();\r\n\r\n    //Get the checked duplicates\r\n    const confirmedDuplicates = duplicatesData.filter(duplicateData=>duplicateData.confirmed).map(duplicateData=>duplicateData.duplicate);\r\n\r\n    console.log(\"Duplicates confirmed from TransactionsImportDuplicatesModal\", confirmedDuplicates);\r\n\r\n    //Remove the true duplicates\r\n    const filteredNewTransactions = newTransactions.filter(newTransaction=>!isTransactionDuplicate(newTransaction, confirmedDuplicates));\r\n\r\n    onSubmitProp(filteredNewTransactions);\r\n  };\r\n\r\n  const onTransactionsImportDuplicatesModalDuplicateCheckboxChange = (oldDuplicateData, newDuplicateData)=>{\r\n    setDuplicatesData(previousDuplicatesData=>{\r\n      const newDuplicatesData = [...previousDuplicatesData];\r\n      const oldDuplicateDataIndex = previousDuplicatesData.indexOf(oldDuplicateData);\r\n      newDuplicatesData[oldDuplicateDataIndex] = newDuplicateData;\r\n      return newDuplicatesData;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Modal id=\"transaction-import-duplicate-modal\" show={isOpen} onHide={onClose}>\r\n      <Modal.Header>\r\n        <Modal.Title className=\"modal-title\">Duplicate transactions</Modal.Title>\r\n        <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"modal\" onClick={onClose}></button>\r\n      </Modal.Header>\r\n      <form className=\"transaction-import-duplicate-form\" onSubmit={onSubmit}>\r\n        <Modal.Body>\r\n          <p>{duplicates.length} possible duplicate transactions were found. Please confirm which are duplicates.</p>\r\n          <div className=\"overflow-auto\">\r\n            {\r\n              duplicatesData.map((duplicateData, i)=>(\r\n                <TransactionsImportDuplicatesModalDuplicateCheckbox key={i} id={i} duplicateData={duplicateData} onChange={onTransactionsImportDuplicatesModalDuplicateCheckboxChange} />\r\n              ))\r\n            }\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <button className=\"btn btn-secondary\" type=\"button\" tabIndex=\"1\" onClick={onClose}>Cancel import</button>\r\n          <button className=\"btn btn-primary\" type=\"submit\" tabIndex=\"2\">Confirm</button>\r\n        </Modal.Footer>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default TransactionsImportDuplicatesModal;\r\n","import Modal from 'react-bootstrap/Modal';\r\n\r\nimport {convertNumberToCurrency} from './../../utilities';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsImportConfirmedModal = ({ transactions, duplicates, isOpen, onClose, onSubmit:onSubmitProp })=>{\r\n  const onSubmit = event=>{\r\n    event.preventDefault();\r\n\r\n    onSubmitProp(transactions);\r\n  };\r\n\r\n  const longestTransactionDate = Math.max(...transactions.map(({TransactionDate})=>TransactionDate.toLocaleDateString().length));\r\n  const longestAmount = Math.max(...transactions.map(({Amount})=>`${Amount >= 0 ? \" \" : \"\"}${convertNumberToCurrency(Amount)}`.length));\r\n  const longestDescription = Math.max(...transactions.map(({Description})=>Description.length));\r\n\r\n  return (\r\n    <Modal className=\"transaction-import-confirmed-modal\" show={isOpen} onHide={onClose}>\r\n      <Modal.Header>\r\n        <Modal.Title className=\"modal-title\">Transactions imported!</Modal.Title>\r\n        <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"modal\" onClick={onClose}></button>\r\n      </Modal.Header>\r\n      <form className=\"transaction-import-confirmed-modal-form\" onSubmit={onSubmit}>\r\n        <Modal.Body>\r\n          <p>Successfully imported {transactions.length} transactions.</p>\r\n          <div className=\"overflow-auto\">\r\n            {\r\n              transactions.map((transaction, i)=>{\r\n                const transactionDateString = transaction.TransactionDate.toLocaleDateString();\r\n                const amountString = `${transaction.Amount >= 0 ? \" \" : \"\"}${convertNumberToCurrency(transaction.Amount)}`;\r\n                const descriptionString = transaction.Description;\r\n\r\n                const transactionDateSpaces = Array(longestTransactionDate-transactionDateString.length).fill(\" \").join(\"\");\r\n                const amountSpaces = Array(longestAmount-amountString.length).fill(\" \").join(\"\");\r\n                const descriptionSpaces = Array(longestDescription-descriptionString.length).fill(\" \").join(\"\");\r\n\r\n                return (\r\n                  <div key={i} className=\"confirmed-transaction\">\r\n                    {`${transactionDateString}${transactionDateSpaces}  ${amountString}${amountSpaces}  ${descriptionString}${descriptionSpaces}`}\r\n                  </div>\r\n                );\r\n            })\r\n            }\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <button className=\"btn btn-secondary\" type=\"button\" tabIndex=\"1\" onClick={onClose}>Cancel import</button>\r\n          <button className=\"btn btn-primary\" type=\"submit\" tabIndex=\"2\">Finish import</button>\r\n        </Modal.Footer>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default TransactionsImportConfirmedModal;\r\n","import './index.scss';\r\n\r\nconst TransactionsImportFormToggle = ({ onClick })=>{\r\n  return (\r\n    <div className=\"transaction-import-form-toggle bg-primary d-flex justify-content-center align-items-center\" onClick={onClick}>\r\n      <span className=\"transaction-import-form-toggle-icon\">+</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsImportFormToggle;\r\n","import {useState, useEffect} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nimport TransactionsImportForm from './../TransactionsImportForm';\r\nimport TransactionsData from './../TransactionsData';\r\nimport TransactionDetailModal from './../TransactionDetailModal';\r\nimport TransactionDeleteModal from './../TransactionDeleteModal';\r\nimport TransactionsImportDuplicatesModal from './../TransactionsImportDuplicatesModal';\r\nimport TransactionsImportConfirmedModal from './../TransactionsImportConfirmedModal';\r\nimport TransactionsImportFormToggle from './../TransactionsImportFormToggle';\r\n\r\nimport {useBudgetCycleTransactions} from './../../hooks';\r\n\r\nimport './index.scss';\r\n\r\nconst TransactionsView = ({ transactions, budgetCycle, allBudgetCycles, transactionsImportDuplicatesModalNewTransactions, transactionsImportDuplicatesModalDuplicates, isTransactionsImportDuplicatesModalOpen, onTransactionsImportDuplicatesModalClose, onTransactionsImportDuplicatesModalSubmit, onTransactionsImportFormSubmit:onTransactionsImportFormSubmitProp, onTransactionsImportFormFileInputChange:onTransactionsImportFormFileInputChangeProp, onTransactionDetailModalSubmit:onTransactionDetailModalSubmitProp, onTransactionDeleteModalSubmit:onTransactionDeleteModalSubmitProp, transactionsImportConfirmedModalTransactions, isTransactionsImportConfirmedModalOpen, closeTransactionsImportConfirmedModal, onTransactionsImportConfirmedModalSubmit, transactionCategories, transactionTypes, setFooterNavbar })=>{\r\n  //Send the route to the footer navbar\r\n  const route = useLocation().pathname;\r\n  useEffect(()=>{\r\n    setFooterNavbar(route);\r\n  }, [route]);\r\n\r\n  const [isTransactionImportFormOpen, setIsTransactionImportFormOpen] = useState(false);\r\n\r\n  const [transactionDetailModalTransaction, setTransactionDetailModalTransaction] = useState(null);\r\n  const [isTransactionDetailModalOpen, setIsTransactionDetailModalOpen] = useState(false);\r\n  const [transactionDeleteModalTransaction, setTransactionDeleteModalTransaction] = useState(null);\r\n  const [isTransactionDeleteModalOpen, setIsTransactionDeleteModalOpen] = useState(false);\r\n\r\n  const budgetCycleTransactions = useBudgetCycleTransactions(transactions, budgetCycle);\r\n\r\n  const onTransactionImportFormToggleClick = event=>{\r\n    setIsTransactionImportFormOpen(wasOpen=>!wasOpen);\r\n  };\r\n\r\n  const onTransactionsImportFormSubmit = scrapedTransactionsData=>{\r\n    //Re-close the form\r\n    setIsTransactionImportFormOpen(false);\r\n\r\n    onTransactionsImportFormSubmitProp(scrapedTransactionsData);\r\n  };\r\n\r\n  const onTransactionsImportFormFileInputChange = transactionsDataArray=>{\r\n    //Re-close the form\r\n    setIsTransactionImportFormOpen(false);\r\n\r\n    onTransactionsImportFormFileInputChangeProp(transactionsDataArray);\r\n  };\r\n\r\n  const openTransactionDetailModal = ()=>{\r\n    setIsTransactionDetailModalOpen(true);\r\n  };\r\n\r\n  const closeTransactionDetailModal = ()=>{\r\n    setIsTransactionDetailModalOpen(false);\r\n  };\r\n\r\n  const openTransactionDeleteModal = ()=>{\r\n    setIsTransactionDeleteModalOpen(true);\r\n  };\r\n\r\n  const closeTransactionDeleteModal = ()=>{\r\n    setIsTransactionDeleteModalOpen(false);\r\n  };\r\n\r\n  const onTransactionEditButtonClick = transaction=>{\r\n    setTransactionDetailModalTransaction(transaction);\r\n    openTransactionDetailModal();\r\n  };\r\n\r\n  const onTransactionDeleteButtonClick = transaction=>{\r\n    setTransactionDeleteModalTransaction(transaction);\r\n    openTransactionDeleteModal();\r\n  };\r\n\r\n  const onTransactionDetailModalSubmit = (updatedTransaction)=>{\r\n    onTransactionDetailModalSubmitProp(transactionDetailModalTransaction, updatedTransaction);\r\n    closeTransactionDetailModal();\r\n  };\r\n\r\n  const onTransactionDeleteModalSubmit = (deletedTransaction)=>{\r\n    onTransactionDeleteModalSubmitProp(transactionDeleteModalTransaction, deletedTransaction);\r\n    closeTransactionDeleteModal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"view transactions-view\">\r\n      <h1 className=\"page-title display-3\">Transactions</h1>\r\n      <TransactionsImportForm isOpen={isTransactionImportFormOpen} onSubmit={onTransactionsImportFormSubmit} onFileInputChange={onTransactionsImportFormFileInputChange} />\r\n      <TransactionsData budgetCycleTransactions={budgetCycleTransactions} onTransactionEditButtonClick={onTransactionEditButtonClick} onTransactionDeleteButtonClick={onTransactionDeleteButtonClick} />\r\n      <TransactionsImportFormToggle onClick={onTransactionImportFormToggleClick} />\r\n      <TransactionDetailModal transaction={transactionDetailModalTransaction} allBudgetCycles={allBudgetCycles} categories={transactionCategories} types={transactionTypes} isOpen={isTransactionDetailModalOpen} onClose={closeTransactionDetailModal} onSubmit={onTransactionDetailModalSubmit} />\r\n      <TransactionDeleteModal transaction={transactionDeleteModalTransaction} isOpen={isTransactionDeleteModalOpen} onClose={closeTransactionDeleteModal} onSubmit={onTransactionDeleteModalSubmit} />\r\n      <TransactionsImportDuplicatesModal newTransactions={transactionsImportDuplicatesModalNewTransactions} duplicates={transactionsImportDuplicatesModalDuplicates} isOpen={isTransactionsImportDuplicatesModalOpen} onClose={onTransactionsImportDuplicatesModalClose} onSubmit={onTransactionsImportDuplicatesModalSubmit} />\r\n      <TransactionsImportConfirmedModal transactions={transactionsImportConfirmedModalTransactions} isOpen={isTransactionsImportConfirmedModalOpen} onClose={closeTransactionsImportConfirmedModal} onSubmit={onTransactionsImportConfirmedModalSubmit} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionsView;\r\n","import {useState, useEffect} from 'react';\r\n\r\nimport './index.scss';\r\n\r\nconst SettingsInput = ({ setting })=>{\r\n  const [name, setName] = useState(setting.name || \"\");\r\n  const [value, setValue] = useState(setting.value || \"\");\r\n\r\n  useEffect(()=>{\r\n    if (!setting) return;\r\n\r\n    setName(setting.name || \"\");\r\n    setValue(setting.value || \"\");\r\n  }, [setting]);\r\n\r\n  const onChange = event=>{\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"setting-input mb-3\">\r\n      <label htmlFor={name} className=\"form-label\">{name}</label>\r\n      <input id={name} className=\"form-control\" name={name} type=\"text\" value={value} onChange={onChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsInput;\r\n","import SettingsInput from './../SettingsInput';\r\n\r\nimport './index.scss';\r\n\r\nconst SettingsForm = ({ settings, onSubmit:onSubmitProp })=>{\r\n  const onSubmit = event=>{\r\n    event.preventDefault();\r\n\r\n    const submittedSettings = [...event.target.querySelectorAll(\".setting-input [name]\")].reduce((data, {name, value})=>({...data, [name]: value}), {});\r\n\r\n    onSubmitProp(submittedSettings);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      {Object.entries(settings).map(([name, props])=>(<SettingsInput key={name} setting={{name, ...props}} />))}\r\n      <div className=\"d-flex justify-content-center mt-4\">\r\n        <button className=\"btn btn-primary\" type=\"submit\">Save</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SettingsForm;\r\n","import {useEffect} from 'react';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nimport SettingsForm from './../SettingsForm';\r\n\r\nimport './index.scss';\r\n\r\nconst SettingsView = ({ setFooterNavbar, settings, onSubmit })=>{\r\n  //Send the route to the footer navbar\r\n  const route = useLocation().pathname;\r\n  useEffect(()=>{\r\n    setFooterNavbar(route);\r\n  }, [route]);\r\n\r\n  return (\r\n    <div className=\"view settings-view\">\r\n      <h1 className=\"page-title display-3\">Settings</h1>\r\n      <SettingsForm settings={settings} onSubmit={onSubmit} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SettingsView;\r\n","import {useEffect, useRef} from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nimport './index.scss';\r\n\r\nconst FooterNavbar = ({ active })=>{\r\n  const footerNavbar = useRef(null);\r\n\r\n  const setActiveItem = (active, footerNavbar)=>{\r\n    if (!active) return;\r\n    const activePath = (process.env.NODE_ENV === \"production\" ? process.env.PUBLIC_URL : '')+(active === \"/\" ? \"/dashboard\" : active);\r\n    const navItems = [...footerNavbar.current.querySelectorAll(\".footer-nav-item\")];\r\n    const activeItem = navItems.find(navItem=>navItem.getAttribute(\"href\") === activePath);\r\n    navItems.forEach(navItem=>navItem.classList.remove(\"active\"));\r\n    if (activeItem) activeItem.classList.add(\"active\");\r\n  };\r\n\r\n  useEffect(()=>{\r\n    setActiveItem(active, footerNavbar)\r\n  }, [active]);\r\n\r\n  return (\r\n    <footer className=\"footer fixed-bottom\" ref={footerNavbar}>\r\n      <nav className=\"footer-nav nav nav-pills nav-justified\">\r\n        <Link className=\"footer-nav-item nav-link d-flex flex-column\" to=\"/dashboard\"><i className=\"footer-nav-item-icon fas fa-home pb-1\"></i>Dashboard</Link>\r\n        <Link className=\"footer-nav-item nav-link d-flex flex-column\" to=\"/budgets\"><i className=\"footer-nav-item-icon far fa-clipboard pb-1\"></i>Budgets</Link>\r\n        <Link className=\"footer-nav-item nav-link d-flex flex-column\" to=\"/transactions\"><i className=\"footer-nav-item-icon fas fa-list pb-1\"></i>Transactions</Link>\r\n        <Link className=\"footer-nav-item nav-link d-flex flex-column\" to=\"/settings\"><i className=\"footer-nav-item-icon fas fa-cogs pb-1\"></i>Settings</Link>\r\n      </nav>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default FooterNavbar;\r\n","import Modal from 'react-bootstrap/Modal';\r\nimport SettingsForm from './../SettingsForm';\r\n\r\nimport './index.scss';\r\n\r\nconst SignInSettingsModal = ({ settings, isOpen, onClose, onSubmit:onSubmitProp })=>{\r\n  const onSubmit = submittedSettings=>{\r\n    onSubmitProp(submittedSettings);\r\n\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal id=\"signin-settings-modal\" show={isOpen} onHide={onClose}>\r\n      <Modal.Header>\r\n        <Modal.Title className=\"modal-title\">Sign In Settings</Modal.Title>\r\n        <button className=\"btn-close\" type=\"button\" data-bs-dismiss=\"modal\" onClick={onClose}></button>\r\n      </Modal.Header>\r\n      <Modal.Body>\r\n        <div className=\"alert alert-warning d-flex align-items-center\" role=\"alert\">\r\n          <i className=\"fas fa-exclamation-triangle me-2\"></i>\r\n          Please assure the following settings are valid.\r\n        </div>\r\n        <SettingsForm settings={settings} onSubmit={onSubmit} />\r\n      </Modal.Body>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default SignInSettingsModal;\r\n","import {signOut} from './../../googleApi';\r\n\r\nimport './index.scss';\r\n\r\nconst GoogleApiUserButton = ({ signedInUser })=>{\r\n  return (\r\n    <div className=\"dropdown\">\r\n      <button className=\"user-button btn bg-light\" type=\"button\" id=\"user-button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n        <img className=\"user-button-image\" src={signedInUser.imageUrl} alt=\"signed in user image\"/>\r\n        <span className=\"user-button-name\">{signedInUser.firstName}</span>\r\n      </button>\r\n      <ul className=\"dropdown-menu\" aria-labelledby=\"user-button\">\r\n        <li><a className=\"dropdown-item\" onClick={signOut}>Sign out</a></li>\r\n      </ul>\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default GoogleApiUserButton;\r\n","import Logo from './../Logo';\r\nimport GoogleApiUserButton from './../GoogleApiUserButton';\r\n\r\nimport './index.scss';\r\n\r\nconst Header = ({ signedInUser })=>{\r\n  return (\r\n    <header className=\"dashboard-header navbar-text fixed-top bg-primary\">\r\n      <div className=\"container d-flex justify-content-between\">\r\n        <Logo light />\r\n        <div className=\"d-flex justify-content-center align-items-center\">\r\n          <GoogleApiUserButton signedInUser={signedInUser}/>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","//Import package dependencies\nimport {useState, useEffect} from 'react';\nimport {BrowserRouter as Router, Switch, Route} from 'react-router-dom';\n\n//Import source code\nimport {getBudgetCycleFromDate, getBudgetCyclesFromTransactions, typeCheckTransactions, isTransactionDuplicate, categorizeTransactionByDescription, importTransactions, typeCheckBudgetsData, typeCheckAccountsData, typeCheckAccountData, throwException} from './../../utilities';\nimport {getSpreadsheetId, setSpreadsheetId, getClientId, setClientId, initAuthorization} from './../../googleApi';\nimport {getTransactions, updateTransactions, getBudgetsData, getAccountsData, getAccountData} from './../../api';\nimport {useScript, useConsoleLog} from './../../hooks';\n\n//Import custom components\nimport SignInView from './../SignInView';\nimport DashboardView from './../DashboardView';\nimport BudgetsView from './../BudgetsView';\nimport TransactionsView from './../TransactionsView';\nimport SettingsView from './../SettingsView';\nimport FooterNavbar from './../FooterNavbar';\nimport SignInSettingsModal from './../SignInSettingsModal';\nimport Header from './../Header';\n\n//Import styles\nimport './main.css';\nimport './index.scss';\n\n\nconst App = () => {\n  //Set application state\n  const [transactions, setTransactions] = useState([]);\n  const [budgetsData, setBudgetsData] = useState([]);\n  const [accountsData, setAccountsData] = useState([]);\n  const [accountData, setAccountData] = useState({});\n\n  const [footerNavbar, setFooterNavbar] = useState(null);\n  const [budgetCycle, setBudgetCycle] = useState(getBudgetCycleFromDate(new Date()));\n  const [transactionsImportDuplicatesModalNewTransactions, setTransactionsImportDuplicatesModalNewTransactions] = useState([]);\n  const [transactionsImportDuplicatesModalDuplicates, setTransactionsImportDuplicatesModalDuplicates] = useState([]);\n  const [isTransactionsImportDuplicatesModalOpen, setIsTransactionsImportDuplicatesModalOpen] = useState(false);\n  const [transactionsImportConfirmedModalTransactions, setTransactionsImportConfirmedModalTransactions] = useState([]);\n  const [isTransactionsImportConfirmedModalOpen, setIsTransactionsImportConfirmedModalOpen] = useState(false);\n  const [signedInUser, setSignedInUser] = useState(undefined);\n  const [isSignInSettingsModalOpen, setIsSignInSettingsModalOpen] = useState(false);\n\n  //Declare settings\n  const settings = {\n    \"Client Id\": {\n      value: getClientId(),\n      update: clientId=>setClientId(clientId),\n    },\n    \"Spreadsheet id\": {\n      value: getSpreadsheetId(),\n      update: spreadsheetId=>setSpreadsheetId(spreadsheetId),\n    }\n  };\n\n  const transactionCategories = [\n    null,\n    \"Savings\",\n    \"Gas\",\n    \"Church\",\n    \"Groceries/Necessities\",\n    \"LoveInAction\",\n    \"Family Outings\",\n    \"Personal Spending\",\n    \"Miscellaneous\",\n    \"Sharonview mortgage & escrow\",\n    \"HOA dues\",\n    \"Duke Energy\",\n    \"SJWD Water District\",\n    \"Piedmont Natural Gas\",\n    \"Kirby Sanitation\",\n    \"Laurens Electric ProTec Security\",\n    \"SimpliSafe (for mom)\",\n    \"AT&T Internet\",\n    \"State Farm auto insurance\",\n    \"AT&T phone bill\",\n    \"Spotify Premium subscription\",\n    \"Netflix Premium subscription\",\n    \"Discovery Plus subscription\",\n    \"YMCA membership\",\n  ];\n\n  const transactionTypes = [\n    null,\n    //Credit card\n    \"Charges\",     //-\n    \"Payments\",    //+\n\n    //Checking/Savings\n    \"Debit\",       //-\n    \"Credit\",      //+\n    \"Withdrawal\",  //-\n    \"Deposit\",     //+\n    \"Transfer\",    //+/-\n    \"Payment\",     //-\n  ];\n\n  const getAllBudgetCycles = transactions=>{\n    const todayBudgetCycle = getBudgetCycleFromDate(new Date());\n\n    return [\n      ...new Set([\n        todayBudgetCycle, //assure the current month is an option as well\n        ...getBudgetCyclesFromTransactions(transactions),\n      ].map(date=>date.toJSON()))\n    ]\n      .map(JSON=>new Date(JSON));\n  };\n\n  const [allBudgetCycles, setAllBudgetCycles] = useState(getAllBudgetCycles(transactions));\n\n  useEffect(()=>\n    setAllBudgetCycles(getAllBudgetCycles(transactions))\n  , [transactions]);\n\n\n\n  //Log data\n  useConsoleLog(transactions, \"Transactions Data:\");\n  useConsoleLog(budgetsData, \"Budget Data:\");\n  useConsoleLog(accountsData, \"Accounts Data:\");\n  useConsoleLog(accountData, \"Account Data:\");\n  useConsoleLog(signedInUser, \"signedInUser:\");\n  useConsoleLog(budgetCycle, \"budgetCycle:\");\n\n  const gapiLoaded = useScript(\"https://apis.google.com/js/api.js\");\n\n  //Create helper functions\n  const saveSettings = savedSettings=>{\n    //Call the update function for each setting\n    Object.entries(savedSettings).forEach(([settingName, settingValue])=>\n      settings[settingName].update(settingValue)\n    );\n  };\n\n  const connectToGoogleAPI = async ()=>{\n    if(!gapiLoaded) return;\n\n    //Try to initialize the Google API\n    try {\n      initAuthorization(onSignInChange, onSignInChange);\n    }\n    catch (err) {\n      //If credentials weren't found, prompt the user for the credentials\n      if (err.name === \"CredentialsNotFoundError\") {\n        return openSignInSettingsModal();\n        // throw new Error(\"Failed to get authorization credentials.\");\n      }\n      console.log(\"test\")\n      return throwException(err);\n    }\n  };\n\n  const onBudgetCycleChange = budgetCycle=>{\n    setBudgetCycle(budgetCycle);\n  };\n\n  //Create state handlers\n  const checkTransactionsForDuplicates = (previousTransactions, newTransactions)=>{\n    if(!previousTransactions.length) return newTransactions;\n\n    //Look for possible duplicate transactions,\n    // and confirm if they are duplicates (shouldn't be added),\n    // or not duplicates (should be added)\n    const duplicates = [];\n    newTransactions.forEach(newTransaction=>{\n      const duplicate = isTransactionDuplicate(newTransaction, previousTransactions);\n      if (duplicate) {\n        duplicates.push(duplicate);\n      }\n    });\n\n    //If there were no duplicates,\n    // open the confirmed imported transactions modal\n    if (!duplicates.length) {\n      setTransactionsImportConfirmedModalTransactions(newTransactions);\n      openTransactionsImportConfirmedModal();\n      return previousTransactions;\n    }\n\n    //Otherwise, ask user to confirm true duplicates,\n    // and just return the previous data for now\n    console.log(\"Duplicates: \", duplicates);\n    setTransactionsImportDuplicatesModalNewTransactions(newTransactions);\n    setTransactionsImportDuplicatesModalDuplicates(duplicates);\n    openTransactionsImportDuplicatesModal();\n\n    return previousTransactions;\n  };\n\n  const setTransactionsHandler = (previousTransactions, newTransactions, callback, oldTransaction)=>{\n    //If there are no new transactions, short-circuit\n    if ((Array.isArray(newTransactions) ? !newTransactions.length : newTransactions !== false && !newTransactions)) return previousTransactions;\n\n    //If there are new transactions, massage them\n    let transactions;\n    if (newTransactions) {\n      //Check that we have an array of transactions\n      let transactionsArray = newTransactions;\n      if (!(newTransactions instanceof Array)) transactionsArray = [newTransactions];\n\n      //Type check transactions data to convert from strings to the correct type\n      const typeCheckedTransactions = typeCheckTransactions(transactionsArray);\n\n      //Assign category & notes from description\n      transactions = typeCheckedTransactions.map(transaction=>categorizeTransactionByDescription(transaction));\n    }\n\n    //Return the data manipulation callback result, sorted\n    if (callback) return callback(previousTransactions, transactions, oldTransaction)\n      .sort((a,b)=>b.TransactionDate-a.TransactionDate);\n\n    //Otherwise, just return the transactions, sorted\n    return transactions.sort((a,b)=>b.TransactionDate-a.TransactionDate);\n  };\n\n  const setTransactionsWrapper = newTransactions=>{\n    //Import new transactions\n    setTransactions(previousTransactions=>{\n      //Run through transaction normalization\n      return setTransactionsHandler(previousTransactions, newTransactions);\n    });\n  };\n\n  const importTransactionsWrapper = newTransactions=>{\n    //Import new transactions\n    setTransactions(previousTransactions=>{\n      const callback = (previousTransactions, newTransactions)=>{\n        //Check for duplicates, and return depending if any were found\n        return checkTransactionsForDuplicates(previousTransactions, newTransactions);\n      };\n\n      //Run through transaction normalization\n      return setTransactionsHandler(previousTransactions, newTransactions, callback);\n    });\n  };\n\n  const insertTransactionsWrapper = newTransactions=>{\n    //Import new transactions\n    setTransactions(previousTransactions=>{\n      const callback = (previousTransactions, newTransactions)=>{\n        //Append the new transactions\n        return [...previousTransactions, ...newTransactions];\n      };\n\n      //Run through transaction normalization\n      return setTransactionsHandler(previousTransactions, newTransactions, callback);\n    });\n  };\n\n  const updateTransactionWrapper = (oldTransaction, newTransaction)=>{\n    //Update a single transaction\n    setTransactions(previousTransactions=>{\n      const callback = (previousTransactions, newTransactions, oldTransaction)=>{\n        //Get the single updated transaction wrapped in an array\n        const newTransaction = newTransactions[0];\n\n        //Update transactions with the new transaction\n        const transactions = [...previousTransactions]; //create deep copy\n        transactions[transactions.indexOf(oldTransaction)] = newTransaction;\n\n        return transactions;\n      };\n\n      //Run through transaction normalization\n      return setTransactionsHandler(previousTransactions, newTransaction, callback, oldTransaction);\n    });\n  };\n\n  const deleteTransactionWrapper = deletedTransaction=>{\n    //Delete a single transaction\n    setTransactions(previousTransactions=>{\n      const callback = (previousTransactions, transaction, deletedTransaction)=>{\n        //Update transactions with the new transaction\n        const transactions = [...previousTransactions]; //create deep copy\n        const index = transactions.indexOf(deletedTransaction);\n        transactions.splice(index, 1);\n\n        return transactions;\n      };\n\n      //Run through transaction normalization\n      return setTransactionsHandler(previousTransactions, false, callback, deletedTransaction);\n    });\n  };\n\n  const setBudgetsDataWrapper = newBudgetsData=>{\n    //Import new data\n    setBudgetsData(previousBudgetsData=>{\n      if (!newBudgetsData) return [];\n\n      const typeCheckedData = typeCheckBudgetsData(newBudgetsData);\n      return typeCheckedData;\n    });\n  };\n\n  const setAccountsDataWrapper = newAccountsData=>{\n    //Import new data\n    setAccountsData(previousAccountsData=>{\n      if (!newAccountsData) return [];\n\n      const typeCheckedData = typeCheckAccountsData(newAccountsData);\n      return typeCheckedData;\n    });\n  };\n\n  const setAccountDataWrapper = newAccountData=>{\n    //Import new data\n    setAccountData(previousAccountData=>{\n      if (!newAccountData) return {};\n\n      const typeCheckedData = typeCheckAccountData(newAccountData);\n      return typeCheckedData;\n    });\n  };\n\n\n  //Create event listeners\n  const onTransactionsImportFormSubmit = scrapedTransactionsData=>{\n    //Import the scraped transactions data\n    const transactions = importTransactions(scrapedTransactionsData, \"scraped\");\n\n    //Set the new transactions data\n    importTransactionsWrapper(transactions);\n  };\n\n  const onTransactionsImportFormFileInputChange = transactionsDataArray=>{\n    //Import the csv transactions data\n    const transactions = importTransactions(transactionsDataArray, \"csv\");\n\n    //Set the new transactions data\n    importTransactionsWrapper(transactions);\n  };\n\n  const onTransactionDetailModalSubmit = (oldTransaction, updatedTransaction)=>{\n    updateTransactionWrapper(oldTransaction, updatedTransaction);\n  };\n\n  const onTransactionDeleteModalSubmit = deletedTransaction=>{\n    deleteTransactionWrapper(deletedTransaction);\n  };\n\n  const openTransactionsImportDuplicatesModal = ()=>{\n    setIsTransactionsImportDuplicatesModalOpen(true);\n  };\n\n  const closeTransactionsImportDuplicatesModal = ()=>{\n    setIsTransactionsImportDuplicatesModalOpen(false);\n  };\n\n  const onTransactionsImportDuplicatesModalSubmit = (filteredNewTransactions)=>{\n    //Close the modal\n    closeTransactionsImportDuplicatesModal();\n\n    //Open the confirmed imported transactions modal\n    setTransactionsImportConfirmedModalTransactions(filteredNewTransactions);\n    openTransactionsImportConfirmedModal();\n  };\n\n  const openTransactionsImportConfirmedModal = ()=>{\n    setIsTransactionsImportConfirmedModalOpen(true);\n  };\n\n  const closeTransactionsImportConfirmedModal = ()=>{\n    setIsTransactionsImportConfirmedModalOpen(false);\n  };\n\n  const onTransactionsImportConfirmedModalSubmit = confirmedTransactions=>{\n    //Update transactions with the new transaction\n    insertTransactionsWrapper(confirmedTransactions);\n\n    //Close the modal\n    closeTransactionsImportConfirmedModal();\n  };\n\n  const onSignInChange = signInInfo=>{\n    setSignedInUser(signInInfo);\n  };\n\n  const onSettingsViewSubmit = submittedSettings=>{\n    saveSettings(submittedSettings);\n  };\n\n  const openSignInSettingsModal = ()=>{\n    setIsSignInSettingsModalOpen(true);\n  };\n\n  const closeSignInSettingsModal = ()=>{\n    setIsSignInSettingsModalOpen(false);\n\n    //Re-attempt to initialize Google API again\n    connectToGoogleAPI();\n  };\n\n  const onSignInSettingsModalSubmit = submittedSettings=>{\n    saveSettings(submittedSettings);\n  };\n\n  //When the Google API JS library loads, initialize the Google API\n  useEffect(()=>\n    connectToGoogleAPI()\n    , [gapiLoaded]);\n\n  //Whenever the user gets logged in,\n  // attempt to query for data\n  useEffect(()=>{\n    //Run async function inside necessary useEffect sync function\n    (async ()=>{\n      if (!signedInUser) return;\n      setTransactionsWrapper(await getTransactions());\n      setBudgetsDataWrapper(await getBudgetsData());\n      setAccountsDataWrapper(await getAccountsData());\n      setAccountDataWrapper(await getAccountData());\n    })();\n  }, [signedInUser]);\n\n  //Whenever the transactions are updated, save them off as well\n  useEffect(()=>{\n    if (!transactions.length) return;\n    updateTransactions(transactions);\n  }, [transactions]);\n\n\n  //If the user has not signed in, send them to the sign in page,\n  // and while the Google API is loading, disable the sign in button\n  if (!signedInUser) return (\n    <div className=\"App\">\n      <Router basename={(process.env.NODE_ENV === \"production\" ? process.env.PUBLIC_URL : null)}>\n        <SignInView isReadyForSignIn={!(signedInUser===undefined)}/>\n        <SignInSettingsModal settings={settings} isOpen={isSignInSettingsModalOpen} onClose={closeSignInSettingsModal} onSubmit={onSignInSettingsModalSubmit} />\n      </Router>\n    </div>\n  );\n\n  return (\n    <div className=\"App\">\n      <Router basename={(process.env.NODE_ENV === \"production\" ? process.env.PUBLIC_URL : null)}>\n        <Header signedInUser={signedInUser} />\n        <Switch>\n          <Route path={[\"/dashboard\", \"/\"]} exact>\n            <DashboardView signedInUser={signedInUser} transactions={transactions} accountsData={accountsData} accountData={accountData} budgetsData={budgetsData} budgetCycle={budgetCycle} allBudgetCycles={allBudgetCycles} onBudgetCycleChange={onBudgetCycleChange} setFooterNavbar={setFooterNavbar} />\n          </Route>\n          <Route path=\"/budgets\" exact>\n            <BudgetsView transactions={transactions} budgetsData={budgetsData} budgetCycle={budgetCycle} setFooterNavbar={setFooterNavbar} />\n          </Route>\n          <Route path=\"/transactions\" exact>\n            <TransactionsView transactions={transactions} budgetCycle={budgetCycle} allBudgetCycles={allBudgetCycles} transactionsImportDuplicatesModalNewTransactions={transactionsImportDuplicatesModalNewTransactions} transactionsImportDuplicatesModalDuplicates={transactionsImportDuplicatesModalDuplicates} isTransactionsImportDuplicatesModalOpen={isTransactionsImportDuplicatesModalOpen} onTransactionsImportDuplicatesModalClose={closeTransactionsImportDuplicatesModal} onTransactionsImportDuplicatesModalSubmit={onTransactionsImportDuplicatesModalSubmit} onTransactionsImportFormSubmit={onTransactionsImportFormSubmit} onTransactionsImportFormFileInputChange={onTransactionsImportFormFileInputChange} onTransactionDetailModalSubmit={onTransactionDetailModalSubmit} onTransactionDeleteModalSubmit={onTransactionDeleteModalSubmit} transactionsImportConfirmedModalTransactions={transactionsImportConfirmedModalTransactions} isTransactionsImportConfirmedModalOpen={isTransactionsImportConfirmedModalOpen} closeTransactionsImportConfirmedModal={closeTransactionsImportConfirmedModal} onTransactionsImportConfirmedModalSubmit={onTransactionsImportConfirmedModalSubmit} setFooterNavbar={setFooterNavbar} transactionCategories={transactionCategories} transactionTypes={transactionTypes}/>\n          </Route>\n          <Route path=\"/settings\" exact>\n            <SettingsView setFooterNavbar={setFooterNavbar} settings={settings} onSubmit={onSettingsViewSubmit}/>\n          </Route>\n        </Switch>\n        <FooterNavbar active={footerNavbar} />\n      </Router>\n    </div>\n  );\n};\n\nexport default App;\n","import {parseGoogleSheetsNumber} from './../googleApi';\r\n\r\nexport const typeCheckAccountsData = accountsData=>{\r\n  return accountsData.map(accountData=>({\r\n      ...accountData,\r\n      Balance: parseGoogleSheetsNumber(accountData.Balance),\r\n    })\r\n  );\r\n};\r\n","import {parseGoogleSheetsNumber, parseGoogleSheetsDate} from './../googleApi';\r\n\r\nexport const typeCheckAccountData = accountData=>{\r\n  return accountData.map(data=>({\r\n    ...data,\r\n    CreditScore: parseGoogleSheetsNumber(data.CreditScore),\r\n    LastUpdated: parseGoogleSheetsDate(data.LastUpdated),\r\n  }));\r\n};\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}